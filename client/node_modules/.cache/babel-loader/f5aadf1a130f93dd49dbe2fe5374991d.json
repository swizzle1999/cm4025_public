{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _taggedTemplateLiteral from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n    height: auto;\\n    width: 30%;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\nheight: auto;\\nwidth: 15%;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from'react';import Accordion from\"react-bootstrap/Accordion\";import AccordionToggle from'react-bootstrap/AccordionToggle';import Button from\"react-bootstrap/Button\";import Card from\"react-bootstrap/Card\";import Modal from\"react-bootstrap/Modal\";import Table from'react-bootstrap/Table';import styled from\"styled-components\";import PackListCardComponent from\"./PackListCardComponent\";var fetch=require(\"node-fetch\");var checkForLocalToken=require(\"../utils/checkForLocalToken\");var Logo=styled.img(_templateObject());var Img=styled.img(_templateObject2());var PackListComponent=/*#__PURE__*/function(_React$Component){_inherits(PackListComponent,_React$Component);function PackListComponent(props){var _this;_classCallCheck(this,PackListComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(PackListComponent).call(this,props));_this.renderCards=function(){fetch(\"/api/packs/\"+_this.props.code,{method:\"GET\",headers:{\"accepts\":\"application/json\"}}).then(function(res){return res.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){var i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://Loop through all the cards and remove that ones that do not include the search filter\nfor(i=0;i<json.cards.length;i++){if(!JSON.stringify(json.cards[i].name).includes(_this.props.filter)){json.cards.splice(i,1);i--;}}_this.setState({cardsComponent:json.cards.map(function(card){return React.createElement(PackListCardComponent,{key:card.id,code:card.id,name:card.name,rarity:card.rarity,filter:_this.props.filter,packCode:_this.props.code});}),informationMessage:\"\"});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};_this.openPack=function(event){_this.setState({buttonText:\"Opening Pack...\"});event.preventDefault();checkForLocalToken.checkForLocalTokenNoUserObject().then(function(returnObject){if(returnObject!=null){fetch(\"/api/packs/open/\"+_this.props.code,{method:\"GET\",headers:{\"accepts\":\"application/json\",\"x-auth-token\":returnObject.token}}).then(function(res){return res.json();}).then(function(json){_this.setState({pulledCards:json});_this.showPulledCards();}).then(function(){_this.setState({buttonText:\"Open Pack $\"+_this.state.cost});});}});};_this.hidePulledCards=function(){_this.setState({displayPulledCards:false});};_this.showPulledCards=function(){_this.setState({displayPulledCards:true});};_this.processPulledCards=function(){if(_this.state.pulledCards.error){return React.createElement(\"div\",{style:{textAlign:\"center\"}},React.createElement(\"h1\",null,_this.state.pulledCards.error));}else{if(_this.state.pulledCards[0]&&_this.state.pulledCards[1]&&_this.state.pulledCards[2]){return React.createElement(\"div\",{style:{textAlign:\"center\"}},React.createElement(Img,{src:\"https://cm4025.s3.eu-west-2.amazonaws.com/packs/\"+_this.state.pulledCards[0].setCode+\"/\"+_this.state.pulledCards[0].id+\".jpg\"}),React.createElement(Img,{src:\"https://cm4025.s3.eu-west-2.amazonaws.com/packs/\"+_this.state.pulledCards[1].setCode+\"/\"+_this.state.pulledCards[1].id+\".jpg\"}),React.createElement(Img,{src:\"https://cm4025.s3.eu-west-2.amazonaws.com/packs/\"+_this.state.pulledCards[2].setCode+\"/\"+_this.state.pulledCards[2].id+\".jpg\"}));}else{return;}}};_this.state={cost:0,displayPulledCards:false,pulledCards:{},cardsComponent:null,informationMessage:\"Loading...\",filter:\"\",buttonText:\"\"};return _this;}_createClass(PackListComponent,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.cost==null){this.setState({cost:10});this.setState({buttonText:\"Open Pack $\"+\"10\"});}else{this.setState({cost:this.props.cost});this.setState({buttonText:\"Open Pack $\"+this.props.cost});}}//When component updates it checks to see if the search filter has changed\n//If it has it knows it must re render the cards\n//\"prevState.cardsComponent != null\" works because even though if we type something in that gets no result. its not null, its an empty array\n},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevProps.filter!=this.props.filter&&prevState.cardsComponent!=null){this.setState({informationMessage:\"Loading...\"});this.renderCards();}}//Function that is called when the props of this component change, performs a state change to update the filter\n//Cards component is set to null to get rid of all existing cards from the list\n},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(Modal,{show:this.state.displayPulledCards,onHide:this.hidePulledCards,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true},React.createElement(Modal.Header,null,React.createElement(Modal.Title,{id:\"contained-modal-title-vcenter\"},\"Cards\")),React.createElement(Modal.Body,null,this.processPulledCards()),React.createElement(Modal.Footer,null,React.createElement(Button,{onClick:this.hidePulledCards},\"Close\"))),React.createElement(Card,null,React.createElement(Card.Header,null,React.createElement(AccordionToggle,{as:Button,onClick:this.renderCards,variant:\"link\",eventKey:this.props.code+\"Server\"},this.props.name,React.createElement(Logo,{style:{marginLeft:\"0.5rem\",marginRight:\"0.5rem\"},src:\"https://cm4025.s3.amazonaws.com/packs/\"+this.props.code+\"/\"+this.props.code+\"Logo.jpg\"}),React.createElement(\"br\",null),\"Level Requirment: \",this.props.level),React.createElement(\"br\",null),React.createElement(Button,{variant:\"success\",onClick:this.openPack},this.state.buttonText)),React.createElement(Accordion.Collapse,{eventKey:this.props.code+\"Server\"},React.createElement(Card.Body,null,React.createElement(Table,{striped:true,bordered:true,hover:true},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Card Code\"),React.createElement(\"th\",null,\"Name\"),React.createElement(\"th\",null,\"Rarity\"),React.createElement(\"th\",null,\"Image\"))),React.createElement(\"tbody\",null,this.state.cardsComponent)),React.createElement(\"h1\",null,this.state.informationMessage)))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.filter!=prevState.filter){return{filter:nextProps.filter,cardsComponent:null};}}}]);return PackListComponent;}(React.Component);export{PackListComponent as default};","map":{"version":3,"sources":["D:/Users/swizzle1999/Documents/Programming/MERN/cm4025/client/src/components/PackListComponent.js"],"names":["React","Accordion","AccordionToggle","Button","Card","Modal","Table","styled","PackListCardComponent","fetch","require","checkForLocalToken","Logo","img","Img","PackListComponent","props","renderCards","code","method","headers","then","res","json","i","cards","length","JSON","stringify","name","includes","filter","splice","setState","cardsComponent","map","card","id","rarity","informationMessage","openPack","event","buttonText","preventDefault","checkForLocalTokenNoUserObject","returnObject","token","pulledCards","showPulledCards","state","cost","hidePulledCards","displayPulledCards","processPulledCards","error","textAlign","setCode","prevProps","prevState","marginLeft","marginRight","level","nextProps","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Accordion from \"react-bootstrap/Accordion\";\r\nimport AccordionToggle from 'react-bootstrap/AccordionToggle';\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Table from 'react-bootstrap/Table';\r\nimport styled from \"styled-components\";\r\nimport PackListCardComponent from \"./PackListCardComponent\";\r\n\r\nconst fetch = require(\"node-fetch\");\r\nconst checkForLocalToken = require(\"../utils/checkForLocalToken\");\r\n\r\nconst Logo = styled.img`\r\nheight: auto;\r\nwidth: 15%;\r\n`\r\n\r\nconst Img = styled.img`\r\n    height: auto;\r\n    width: 30%;\r\n`\r\n\r\nexport default class PackListComponent extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            cost: 0,\r\n            displayPulledCards: false,\r\n            pulledCards: {},\r\n            cardsComponent: null,\r\n            informationMessage: \"Loading...\",\r\n            filter: \"\",\r\n            buttonText: \"\",\r\n          }\r\n    }\r\n\r\n    componentDidMount(){\r\n        if (this.props.cost == null){\r\n            this.setState({cost: 10});   \r\n            \r\n            this.setState({\r\n                buttonText: \"Open Pack $\" + \"10\"\r\n            })\r\n        } else {\r\n            this.setState({cost: this.props.cost})\r\n\r\n            this.setState({\r\n                buttonText: \"Open Pack $\" + this.props.cost\r\n            })\r\n        }\r\n    }\r\n\r\n    //When component updates it checks to see if the search filter has changed\r\n    //If it has it knows it must re render the cards\r\n    //\"prevState.cardsComponent != null\" works because even though if we type something in that gets no result. its not null, its an empty array\r\n    componentDidUpdate(prevProps, prevState){\r\n        if (prevProps.filter != this.props.filter && prevState.cardsComponent != null){\r\n            this.setState({informationMessage: \"Loading...\"})\r\n            this.renderCards()\r\n        }\r\n    }\r\n\r\n    //Function that is called when the props of this component change, performs a state change to update the filter\r\n    //Cards component is set to null to get rid of all existing cards from the list\r\n    static getDerivedStateFromProps(nextProps, prevState){\r\n        if (nextProps.filter != prevState.filter){\r\n            return ({filter: nextProps.filter, cardsComponent: null})\r\n        }\r\n    }\r\n\r\n    renderCards = () => {\r\n        fetch(\"/api/packs/\" + this.props.code, {method: \"GET\", headers:{\"accepts\": \"application/json\"}})\r\n        .then(res => res.json())\r\n        .then(async json => {\r\n            //Loop through all the cards and remove that ones that do not include the search filter\r\n            for (let i = 0; i < json.cards.length; i++){\r\n                if (!JSON.stringify(json.cards[i].name).includes(this.props.filter)){\r\n                    json.cards.splice(i, 1)\r\n                    i--\r\n                }\r\n            }\r\n            this.setState({\r\n                cardsComponent: json.cards.map(card => <PackListCardComponent key={card.id} code={card.id} name={card.name} rarity={card.rarity} filter={this.props.filter} packCode={this.props.code}/>),\r\n                informationMessage: \"\",\r\n            })\r\n        })\r\n    }\r\n\r\n    openPack = (event) => {\r\n        this.setState({\r\n            buttonText: \"Opening Pack...\",\r\n        })\r\n\r\n        event.preventDefault();\r\n        checkForLocalToken.checkForLocalTokenNoUserObject()\r\n        .then(returnObject => {\r\n            if (returnObject != null){\r\n                fetch(\"/api/packs/open/\"+this.props.code, {method: \"GET\", headers:{\"accepts\": \"application/json\", \"x-auth-token\": returnObject.token}})\r\n                .then(res => res.json())\r\n                .then(json => {\r\n                    this.setState({\r\n                        pulledCards: json,\r\n                    })\r\n                    this.showPulledCards();\r\n                })\r\n                .then(() => {\r\n                    this.setState({\r\n                        buttonText: \"Open Pack $\" + this.state.cost,\r\n                    })\r\n                })\r\n                \r\n            }\r\n        })\r\n    }\r\n\r\n    hidePulledCards = () =>{\r\n        this.setState({displayPulledCards: false});\r\n    }\r\n\r\n    showPulledCards = () =>{\r\n        this.setState({displayPulledCards: true});\r\n    }\r\n\r\n    processPulledCards = () => {\r\n        if (this.state.pulledCards.error){\r\n            return (\r\n                <div style={{textAlign: \"center\"}}>\r\n                    <h1>{this.state.pulledCards.error}</h1>\r\n                </div>\r\n            );\r\n        } else {\r\n            if (this.state.pulledCards[0] && this.state.pulledCards[1] && this.state.pulledCards[2]){\r\n                return (\r\n                    <div style={{textAlign: \"center\"}}>\r\n                        <Img src={\"https://cm4025.s3.eu-west-2.amazonaws.com/packs/\" + this.state.pulledCards[0].setCode + \"/\" + this.state.pulledCards[0].id + \".jpg\"}></Img>\r\n                        <Img src={\"https://cm4025.s3.eu-west-2.amazonaws.com/packs/\" + this.state.pulledCards[1].setCode + \"/\" + this.state.pulledCards[1].id + \".jpg\"}></Img>\r\n                        <Img src={\"https://cm4025.s3.eu-west-2.amazonaws.com/packs/\" + this.state.pulledCards[2].setCode + \"/\" + this.state.pulledCards[2].id + \".jpg\"}></Img>\r\n                    </div>\r\n                );\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Modal show={this.state.displayPulledCards} onHide={this.hidePulledCards} size=\"lg\" aria-labelledby=\"contained-modal-title-vcenter\" centered>\r\n                    <Modal.Header>\r\n                        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                            Cards\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        {this.processPulledCards()}\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button onClick={this.hidePulledCards}>Close</Button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n                <Card>\r\n                    <Card.Header>\r\n                        <AccordionToggle as={Button} onClick={this.renderCards} variant=\"link\" eventKey={this.props.code+\"Server\"}>\r\n                            {this.props.name}  \r\n                            <Logo style={{marginLeft: \"0.5rem\", marginRight: \"0.5rem\"}}src={\"https://cm4025.s3.amazonaws.com/packs/\" + this.props.code + \"/\" + this.props.code + \"Logo.jpg\"}/>\r\n                            <br></br>\r\n                            Level Requirment: {this.props.level}\r\n                        </AccordionToggle>\r\n                        <br></br>\r\n                        <Button variant=\"success\" onClick={this.openPack}>{this.state.buttonText}</Button>\r\n                    </Card.Header>\r\n                    <Accordion.Collapse eventKey={this.props.code+\"Server\"}>\r\n                        <Card.Body>\r\n                            <Table striped bordered hover>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Card Code</th>\r\n                                        <th>Name</th>\r\n                                        <th>Rarity</th>\r\n                                        <th>Image</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {this.state.cardsComponent} \r\n                                </tbody>\r\n                            </Table>\r\n                            <h1>{this.state.informationMessage}</h1>\r\n                        </Card.Body>\r\n                    </Accordion.Collapse>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}