{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import AddPackComponent from\"./AddPackComponent\";import AdminPackListComponent from\"./AdminPackListComponent\";var fetch=require(\"node-fetch\");var checkForLocalToken=require(\"../utils/checkForLocalToken\");var sortPacksByLevel=require(\"../utils/sortPacksByLevel\");var AdminComponent=/*#__PURE__*/function(_React$Component){_inherits(AdminComponent,_React$Component);function AdminComponent(props){var _this;_classCallCheck(this,AdminComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(AdminComponent).call(this,props));_this.handleInputChange=function(event){_this.setState({packCode:event.target.value});};_this.state={packs:[]};return _this;}_createClass(AdminComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//Fetch all packs from database to display to admin if they are authenticated\ncheckForLocalToken.checkForLocalTokenNoUserObject().then(function(returnObject){if(returnObject!=null){fetch(\"/api/packs/?allPacks=true\",{method:\"GET\",headers:{\"accepts\":\"application/json\",\"x-auth-token\":returnObject.token}}).then(function(res){return res.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(json){var packArray,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(json.packs){packArray=_this2.state.packs;for(i=0;i<json.packs.length;i++){packArray.push(json.packs[i]);}packArray.sort(sortPacksByLevel.compare);_this2.setState({packs:packArray});}case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}});}//Function to map all packs to an AdminPackListComponent\n},{key:\"renderPacks\",value:function renderPacks(packs){return packs.map(function(pack){return React.createElement(AdminPackListComponent,{key:pack.code,code:pack.code,name:pack.name,rarities:pack.rarityOdds});});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){}//Update state on input change\n},{key:\"render\",//Old legacy function, not currently used. Actually replaced by AddPackComponent\n// handleSubmit = (event) => {\n//     this.setState({\n//         informationMessage: \"Processing...\",\n//     })\n//     checkForLocalToken.checkForLocalTokenNoUserObject()\n//     .then(returnObject => {\n//       if (returnObject != null){\n//         this.setState({\n//           token: returnObject.token,\n//       })\n//       }\n//     })\n//     .then(() => {\n//         fetch(\"/api/packs/addpack/\" + this.state.packCode, {method: \"GET\", headers:{\"accepts\": \"application/json\", \"x-auth-token\": this.state.token}})\n//         .then(res => res.json())\n//         .then(json => {\n//             this.setState({\n//                 informationMessage: json.msg\n//             })\n//         });\n//     })\n// }\nvalue:function render(){return React.createElement(\"div\",null,React.createElement(AddPackComponent,null),this.renderPacks(this.state.packs));}}]);return AdminComponent;}(React.Component);export{AdminComponent as default};","map":{"version":3,"sources":["D:/Users/swizzle1999/Documents/Programming/MERN/cm4025/client/src/components/AdminComponent.js"],"names":["React","AddPackComponent","AdminPackListComponent","fetch","require","checkForLocalToken","sortPacksByLevel","AdminComponent","props","handleInputChange","event","setState","packCode","target","value","state","packs","checkForLocalTokenNoUserObject","then","returnObject","method","headers","token","res","json","packArray","i","length","push","sort","compare","map","pack","code","name","rarityOdds","renderPacks","Component"],"mappings":"ikCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CACA,MAAOC,CAAAA,sBAAP,KAAmC,0BAAnC,CAEA,GAAMC,CAAAA,KAAK,CAAGC,OAAO,CAAC,YAAD,CAArB,CACA,GAAMC,CAAAA,kBAAkB,CAAGD,OAAO,CAAC,6BAAD,CAAlC,CACA,GAAME,CAAAA,gBAAgB,CAAGF,OAAO,CAAC,2BAAD,CAAhC,C,GAGqBG,CAAAA,c,oFACjB,wBAAYC,KAAZ,CAAkB,gDACd,gFAAMA,KAAN,GADc,MAwClBC,iBAxCkB,CAwCE,SAACC,KAAD,CAAU,CAC1B,MAAKC,QAAL,CAAc,CACVC,QAAQ,CAAEF,KAAK,CAACG,MAAN,CAAaC,KADb,CAAd,EAGH,CA5CiB,CAGd,MAAKC,KAAL,CAAa,CACTC,KAAK,CAAE,EADE,CAAb,CAHc,aAMjB,C,wFAEkB,iBACf;AACAX,kBAAkB,CAACY,8BAAnB,GACCC,IADD,CACM,SAAAC,YAAY,CAAI,CAClB,GAAIA,YAAY,EAAI,IAApB,CAAyB,CACrBhB,KAAK,CAAC,2BAAD,CAA8B,CAACiB,MAAM,CAAE,KAAT,CAAgBC,OAAO,CAAC,CAAC,UAAW,kBAAZ,CAAgC,eAAgBF,YAAY,CAACG,KAA7D,CAAxB,CAA9B,CAAL,CACCJ,IADD,CACM,SAAAK,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADT,EAECN,IAFD,0FAEM,iBAAMM,IAAN,kIACF,GAAIA,IAAI,CAACR,KAAT,CAAe,CACPS,SADO,CACK,MAAI,CAACV,KAAL,CAAWC,KADhB,CAEX,IAASU,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAGF,IAAI,CAACR,KAAL,CAAWW,MAA/B,CAAuCD,CAAC,EAAxC,CAA2C,CACvCD,SAAS,CAACG,IAAV,CAAeJ,IAAI,CAACR,KAAL,CAAWU,CAAX,CAAf,EACH,CACDD,SAAS,CAACI,IAAV,CAAevB,gBAAgB,CAACwB,OAAhC,EACA,MAAI,CAACnB,QAAL,CAAc,CAACK,KAAK,CAAES,SAAR,CAAd,EACH,CARC,sDAFN,gEAaH,CACJ,CAjBD,EAkBH,CAED;gDACYT,K,CAAO,CACf,MAAOA,CAAAA,KAAK,CAACe,GAAN,CAAU,SAAAC,IAAI,QAAI,qBAAC,sBAAD,EAAwB,GAAG,CAAEA,IAAI,CAACC,IAAlC,CAAwC,IAAI,CAAED,IAAI,CAACC,IAAnD,CAAyD,IAAI,CAAED,IAAI,CAACE,IAApE,CAA0E,QAAQ,CAAEF,IAAI,CAACG,UAAzF,EAAJ,EAAd,CAAP,CACH,C,+DAEmB,CAEnB,CAED;gBAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;uBAES,CACL,MACI,gCACI,oBAAC,gBAAD,MADJ,CAEK,KAAKC,WAAL,CAAiB,KAAKrB,KAAL,CAAWC,KAA5B,CAFL,CADJ,CAMH,C,4BA9EuChB,KAAK,CAACqC,S,SAA7B9B,c","sourcesContent":["import React from 'react';\r\nimport AddPackComponent from \"./AddPackComponent\";\r\nimport AdminPackListComponent from \"./AdminPackListComponent\";\r\n\r\nconst fetch = require(\"node-fetch\");\r\nconst checkForLocalToken = require(\"../utils/checkForLocalToken\");\r\nconst sortPacksByLevel = require(\"../utils/sortPacksByLevel\");\r\n\r\n\r\nexport default class AdminComponent extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            packs: [],\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        //Fetch all packs from database to display to admin if they are authenticated\r\n        checkForLocalToken.checkForLocalTokenNoUserObject()\r\n        .then(returnObject => {\r\n            if (returnObject != null){\r\n                fetch(\"/api/packs/?allPacks=true\", {method: \"GET\", headers:{\"accepts\": \"application/json\", \"x-auth-token\": returnObject.token}})\r\n                .then(res => res.json())\r\n                .then(async json => {\r\n                    if (json.packs){\r\n                        let packArray = this.state.packs\r\n                        for (let i = 0; i < json.packs.length; i++){\r\n                            packArray.push(json.packs[i]);\r\n                        }\r\n                        packArray.sort(sortPacksByLevel.compare)\r\n                        this.setState({packs: packArray});\r\n                    }\r\n                    \r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    //Function to map all packs to an AdminPackListComponent\r\n    renderPacks(packs) {\r\n        return packs.map(pack => <AdminPackListComponent key={pack.code} code={pack.code} name={pack.name} rarities={pack.rarityOdds}/>)\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        \r\n    }\r\n\r\n    //Update state on input change\r\n    handleInputChange = (event) =>{\r\n        this.setState({\r\n            packCode: event.target.value\r\n        })\r\n    }\r\n\r\n    //Old legacy function, not currently used. Actually replaced by AddPackComponent\r\n    // handleSubmit = (event) => {\r\n    //     this.setState({\r\n    //         informationMessage: \"Processing...\",\r\n    //     })\r\n    //     checkForLocalToken.checkForLocalTokenNoUserObject()\r\n    //     .then(returnObject => {\r\n    //       if (returnObject != null){\r\n    //         this.setState({\r\n    //           token: returnObject.token,\r\n    //       })\r\n    //       }\r\n    //     })\r\n    //     .then(() => {\r\n    //         fetch(\"/api/packs/addpack/\" + this.state.packCode, {method: \"GET\", headers:{\"accepts\": \"application/json\", \"x-auth-token\": this.state.token}})\r\n    //         .then(res => res.json())\r\n    //         .then(json => {\r\n    //             this.setState({\r\n    //                 informationMessage: json.msg\r\n    //             })\r\n    //         });\r\n    //     })\r\n    // }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <AddPackComponent />\r\n                {this.renderPacks(this.state.packs)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}