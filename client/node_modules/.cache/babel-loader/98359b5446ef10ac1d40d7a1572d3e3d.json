{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\src\\\\App.js\";\nimport React from 'react';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport './App.css';\nimport { render } from '@testing-library/react';\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\nimport Container from \"react-bootstrap/Container\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Form from 'react-bootstrap/Form';\nimport Card from \"react-bootstrap/Card\";\nimport AccordionToggle from 'react-bootstrap/AccordionToggle';\nimport Button from 'react-bootstrap/Button';\nimport styled from \"styled-components\";\nimport { getFromStorage, setInStorage } from \"./utils/storage\"; //Component Imports\n\nimport NavbarRightPanelComponent from './components/NavbarRightPanelComponent';\nimport NavbarLeftPanelComponent from './components/NavbarLeftPanelComponent';\nimport PlayerStatsComponent from './components/PlayerStatsComponent';\nimport LoginComponent from './components/LoginComponent';\nimport RegisterComponent from './components/RegisterComponent';\nimport PackListComponent from \"./components/PackListComponent\";\nimport InventoryListComponent from \"./components/InventoryListComponent\";\nimport AddPackComponent from \"./components/AddPackComponent\";\nimport AdminComponent from \"./components/AdminComponent\";\nimport ShopComponent from \"./components/ShopComponent\";\n\nconst checkForLocalToken = require(\"./utils/checkForLocalToken\");\n\nconst fetch = require(\"node-fetch\");\n\nconst Styles = styled.div`\n.col-sm-4 {\n    padding-left: 0 !important;\n}\n`;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.NavbarRightPanelComponentChildCallback = dataFromChild => {\n      if (dataFromChild.openPacks) {\n        this.setState({\n          rightPanelComponent: \"PackListComponent\"\n        });\n      } else if (dataFromChild.inventory) {\n        this.setState({\n          rightPanelComponent: \"InventoryListComponent\"\n        });\n      } else if (dataFromChild.addPack) {\n        this.setState({\n          rightPanelComponent: \"AddPackComponent\"\n        });\n      } else if (dataFromChild.admin) {\n        this.setState({\n          rightPanelComponent: \"AdminComponent\"\n        });\n      }\n    };\n\n    this.NavbarLeftPanelComponentChildCallback = dataFromChild => {\n      if (dataFromChild.logOut) {\n        setInStorage(\"PokePacksOnline\", \"\");\n        this.setState({\n          token: \"\",\n          userObject: {}\n        });\n      } else if (dataFromChild.playerStats) {\n        this.setState({\n          leftPanelComponent: \"PlayerStatsComponent\"\n        });\n      } else if (dataFromChild.shop) {\n        this.setState({\n          leftPanelComponent: \"ShopComponent\"\n        });\n      }\n    };\n\n    this.leftPanelComponentChildCallback = dataFromChild => {\n      //if the child is telling the parent to load a new component\n      if (dataFromChild.componentToLoad) {\n        this.setState({\n          leftPanelComponent: dataFromChild.componentToLoad\n        });\n      } //If the child wants to log a user in\n      else if (dataFromChild.login) {\n          fetch(\"/api/auth/\", {\n            method: \"POST\",\n            headers: {\n              \"accepts\": \"application/json\",\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              \"email\": dataFromChild.email,\n              \"password\": dataFromChild.password\n            })\n          }).then(res => res.json()).then(json => {\n            if (json.token) {\n              setInStorage(\"PokePacksOnline\", json.token);\n              this.setState({\n                leftPanelComponent: \"PlayerStatsComponent\"\n              }); //Get token from local storage and then fetch the users details from the database which is then set in state\n\n              checkForLocalToken.checkForLocalToken().then(returnObject => {\n                if (returnObject != null) {\n                  this.setState({\n                    token: returnObject.token,\n                    admin: returnObject.admin,\n                    userObject: returnObject.userObject\n                  });\n                  console.log(returnObject.admin);\n                }\n              });\n            } else {\n              console.log(\"Invalid credentials\");\n            }\n          });\n        } //If the child wants to register a user\n        else if (dataFromChild.register) {\n            fetch(\"/api/users/\", {\n              method: \"POST\",\n              headers: {\n                \"accepts\": \"application/json\",\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                \"username\": dataFromChild.username,\n                \"email\": dataFromChild.email,\n                \"password\": dataFromChild.password,\n                \"confirmPassword\": dataFromChild.confirmPassword\n              })\n            }).then(res => res.json()).then(json => {\n              if (json.token) {\n                this.setState({\n                  leftPanelComponent: \"LoginComponent\"\n                });\n              } else {\n                console.log(\"Invalid credentials\");\n              }\n            });\n          }\n    };\n\n    this.handleInputChange = event => {\n      this.setState({\n        packFilter: event.target.value\n      });\n    };\n\n    this.state = {\n      time: Date.now(),\n      packs: [],\n      token: \"\",\n      admin: false,\n      userObject: {},\n      leftPanelComponent: \"PlayerStatsComponent\",\n      rightPanelComponent: \"PackListComponent\",\n      packFilter: \"\"\n    };\n  }\n\n  componentDidMount() {\n    //Quick check to see if the user has an existing token\n    checkForLocalToken.checkForLocalToken().then(returnObject => {\n      if (returnObject != null) {\n        this.setState({\n          token: returnObject.token,\n          admin: returnObject.admin,\n          userObject: returnObject.userObject\n        });\n      }\n    }); //Fetch all the packs that exist in the database to be displayed\n\n    fetch(\"/api/packs\", {\n      method: \"GET\",\n      headers: {\n        \"accepts\": \"application/json\"\n      }\n    }).then(res => res.json()).then(json => {\n      for (let i = 0; i < json.packs.length; i++) {\n        let packArray = this.state.packs;\n        packArray.push(json.packs[i]);\n        this.setState({\n          packs: packArray\n        });\n      }\n    });\n  } //Function that is used to change what renders on the left panel\n\n\n  leftPanelComponentToRender() {\n    switch (this.state.leftPanelComponent) {\n      case \"LoginComponent\":\n        if (this.state.token) {\n          return React.createElement(PlayerStatsComponent, {\n            token: this.state.token,\n            callbackToParent: this.leftPanelComponentChildCallback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90\n            },\n            __self: this\n          });\n        } else {\n          return React.createElement(LoginComponent, {\n            callbackToParent: this.leftPanelComponentChildCallback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            },\n            __self: this\n          });\n        }\n\n      case \"RegisterComponent\":\n        return React.createElement(RegisterComponent, {\n          callbackToParent: this.leftPanelComponentChildCallback,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        });\n\n      case \"PlayerStatsComponent\":\n        if (this.state.token) {\n          return React.createElement(PlayerStatsComponent, {\n            token: this.state.token,\n            callbackToParent: this.leftPanelComponentChildCallback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          });\n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\"\n          }); // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n\n      case \"ShopComponent\":\n        if (this.state.token) {\n          return React.createElement(ShopComponent, {\n            token: this.state.token,\n            callbackToParent: this.leftPanelComponentChildCallback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107\n            },\n            __self: this\n          });\n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\"\n          }); // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n\n    }\n  }\n\n  rightPanelComponentToRender() {\n    switch (this.state.rightPanelComponent) {\n      case \"PackListComponent\":\n        return this.renderPacks(this.state.packs);\n\n      case \"InventoryListComponent\":\n        if (this.state.token) {\n          return this.renderUserPacks(this.state.packs);\n        } else {\n          this.setState({\n            rightPanelComponent: \"PackListComponent\"\n          });\n        }\n\n      case \"AddPackComponent\":\n        return React.createElement(AddPackComponent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        });\n\n      case \"AdminComponent\":\n        return React.createElement(AdminComponent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        });\n    }\n  }\n\n  //Renders all the packs to the main screen\n  renderPacks(packs) {\n    return packs.map(pack => React.createElement(PackListComponent, {\n      key: pack.code,\n      code: pack.code,\n      name: pack.name,\n      cards: pack.cards,\n      cost: pack.cost,\n      filter: this.state.packFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }));\n  } //Renders all the packs to the main screen\n\n\n  renderUserPacks(packs) {\n    return packs.map(pack => React.createElement(InventoryListComponent, {\n      key: pack.code,\n      code: pack.code,\n      name: pack.name,\n      cards: pack.cards,\n      filter: this.state.packFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }));\n  }\n\n  renderFilterBar() {\n    if (this.state.rightPanelComponent == \"InventoryListComponent\" || this.state.rightPanelComponent == \"PackListComponent\") {\n      return React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"cardFilter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        style: {\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Filter By Card Name\"), React.createElement(Form.Control, {\n        type: \"string\",\n        placeholder: \"\",\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      })));\n    }\n  }\n\n  render() {\n    const {\n      packs\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"App\",\n      style: {\n        backgroundColor: \"#121212\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(Styles, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(NavbarRightPanelComponent, {\n      rightPanelComponent: this.state.rightPanelComponent,\n      callbackToParent: this.NavbarRightPanelComponentChildCallback,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), React.createElement(Row, {\n      style: {\n        margin: \"0 auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(NavbarLeftPanelComponent, {\n      leftPanelComponent: this.state.leftPanelComponent,\n      callbackToParent: this.NavbarLeftPanelComponentChildCallback,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }), this.leftPanelComponentToRender()), React.createElement(Col, {\n      style: {\n        marginTop: \"0.5rem\"\n      },\n      sm: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(Accordion, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, this.renderFilterBar(), this.rightPanelComponentToRender())))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/Users/swizzle1999/Documents/Programming/MERN/cm4025/client/src/App.js"],"names":["React","BrowserRouter","Router","Route","render","ReactCSSTransitionGroup","Container","Col","Row","Accordion","Form","Card","AccordionToggle","Button","styled","getFromStorage","setInStorage","NavbarRightPanelComponent","NavbarLeftPanelComponent","PlayerStatsComponent","LoginComponent","RegisterComponent","PackListComponent","InventoryListComponent","AddPackComponent","AdminComponent","ShopComponent","checkForLocalToken","require","fetch","Styles","div","App","Component","constructor","props","NavbarRightPanelComponentChildCallback","dataFromChild","openPacks","setState","rightPanelComponent","inventory","addPack","admin","NavbarLeftPanelComponentChildCallback","logOut","token","userObject","playerStats","leftPanelComponent","shop","leftPanelComponentChildCallback","componentToLoad","login","method","headers","body","JSON","stringify","email","password","then","res","json","returnObject","console","log","register","username","confirmPassword","handleInputChange","event","packFilter","target","value","state","time","Date","now","packs","componentDidMount","i","length","packArray","push","leftPanelComponentToRender","rightPanelComponentToRender","renderPacks","renderUserPacks","map","pack","code","name","cards","cost","renderFilterBar","color","backgroundColor","margin","marginTop"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\nimport './App.css';\nimport { render } from '@testing-library/react';\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\nimport Container from \"react-bootstrap/Container\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Form from 'react-bootstrap/Form';\nimport Card from \"react-bootstrap/Card\";\nimport AccordionToggle from 'react-bootstrap/AccordionToggle';\nimport Button from 'react-bootstrap/Button';\nimport styled from \"styled-components\";\n\nimport {\n  getFromStorage,\n  setInStorage\n} from \"./utils/storage\";\n\n//Component Imports\nimport NavbarRightPanelComponent from './components/NavbarRightPanelComponent';\nimport NavbarLeftPanelComponent from './components/NavbarLeftPanelComponent';\nimport PlayerStatsComponent from './components/PlayerStatsComponent';\nimport LoginComponent from './components/LoginComponent';\nimport RegisterComponent from './components/RegisterComponent';\nimport PackListComponent from \"./components/PackListComponent\";\nimport InventoryListComponent from \"./components/InventoryListComponent\";\nimport AddPackComponent from \"./components/AddPackComponent\";\nimport AdminComponent from \"./components/AdminComponent\";\nimport ShopComponent from \"./components/ShopComponent\";\n\nconst checkForLocalToken = require(\"./utils/checkForLocalToken\");\n\nconst fetch = require(\"node-fetch\");\n\nconst Styles = styled.div`\n.col-sm-4 {\n    padding-left: 0 !important;\n}\n`\n\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      time: Date.now(),\n      packs: [],\n      token: \"\",\n      admin: false,\n      userObject: {},\n      leftPanelComponent: \"PlayerStatsComponent\",\n      rightPanelComponent: \"PackListComponent\",\n      packFilter: \"\",\n    }\n  }\n\n  componentDidMount(){\n    //Quick check to see if the user has an existing token\n    checkForLocalToken.checkForLocalToken()\n    .then(returnObject => {\n      if (returnObject != null){\n        this.setState({\n          token: returnObject.token,\n          admin: returnObject.admin,\n          userObject: returnObject.userObject,\n      })\n      }\n    })\n\n    //Fetch all the packs that exist in the database to be displayed\n    fetch(\"/api/packs\", {method: \"GET\", headers:{\"accepts\": \"application/json\"}})\n      .then(res => res.json())\n      .then(json => {\n        for (let i = 0; i < json.packs.length; i++){\n          let packArray = this.state.packs\n          packArray.push(json.packs[i]);\n          this.setState({packs: packArray});\n        }\n      })\n\n  }\n\n  //Function that is used to change what renders on the left panel\n  leftPanelComponentToRender(){\n    switch(this.state.leftPanelComponent){\n      case \"LoginComponent\":\n        if(this.state.token){\n          return <PlayerStatsComponent token={this.state.token} callbackToParent={this.leftPanelComponentChildCallback}/>  \n        } else {\n          return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n      case \"RegisterComponent\":\n        return <RegisterComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n      case \"PlayerStatsComponent\":\n        if(this.state.token){\n          return <PlayerStatsComponent token={this.state.token} callbackToParent={this.leftPanelComponentChildCallback}/>  \n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\",\n          })\n          // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n      case \"ShopComponent\":\n        if(this.state.token){\n          return <ShopComponent token={this.state.token} callbackToParent={this.leftPanelComponentChildCallback}/>  \n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\",\n          })\n          // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n    }\n  }\n\n  rightPanelComponentToRender(){\n    switch(this.state.rightPanelComponent){\n      case \"PackListComponent\":\n        return this.renderPacks(this.state.packs)\n      case \"InventoryListComponent\":\n        if (this.state.token){\n          return this.renderUserPacks(this.state.packs);\n        } else {\n          this.setState({\n            rightPanelComponent: \"PackListComponent\",\n          })\n        }\n      case \"AddPackComponent\":\n        return <AddPackComponent />\n      case \"AdminComponent\":\n        return <AdminComponent />\n\n    }\n  }\n\n  NavbarRightPanelComponentChildCallback = dataFromChild => {\n    if (dataFromChild.openPacks){\n      this.setState({\n        rightPanelComponent: \"PackListComponent\",\n      })\n    }else if (dataFromChild.inventory){\n      this.setState({\n        rightPanelComponent: \"InventoryListComponent\",\n      })\n    }else if (dataFromChild.addPack){\n      this.setState({\n        rightPanelComponent: \"AddPackComponent\",\n      })\n    }else if (dataFromChild.admin){\n      this.setState({\n        rightPanelComponent: \"AdminComponent\",\n      })\n    }\n  }\n\n  NavbarLeftPanelComponentChildCallback = dataFromChild => {\n    if (dataFromChild.logOut){\n      setInStorage(\"PokePacksOnline\", \"\");\n      this.setState({\n        token: \"\",\n        userObject: {},\n      })\n    } \n    else if (dataFromChild.playerStats){\n      this.setState({\n        leftPanelComponent: \"PlayerStatsComponent\",\n      })\n    }\n    else if (dataFromChild.shop){\n      this.setState({\n        leftPanelComponent: \"ShopComponent\",\n      })\n    }\n  }\n\n  //The callback all components that use the left panel use to communicate with the parent (this)\n  leftPanelComponentChildCallback = dataFromChild => {\n    //if the child is telling the parent to load a new component\n    if (dataFromChild.componentToLoad){\n      this.setState({\n        leftPanelComponent: dataFromChild.componentToLoad,\n      })\n    } \n    //If the child wants to log a user in\n    else if(dataFromChild.login) {\n      fetch(\"/api/auth/\", {method: \"POST\", headers:{\"accepts\": \"application/json\", \"Content-Type\": \"application/json\"}, body: JSON.stringify({\"email\": dataFromChild.email, \"password\": dataFromChild.password})})\n      .then(res => res.json())\n      .then(json => {\n        if (json.token){\n           setInStorage(\"PokePacksOnline\", json.token);\n           this.setState({\n            leftPanelComponent: \"PlayerStatsComponent\",\n            })\n          //Get token from local storage and then fetch the users details from the database which is then set in state\n          checkForLocalToken.checkForLocalToken()\n          .then(returnObject => {\n            if (returnObject != null){\n              this.setState({\n                token: returnObject.token,\n                admin: returnObject.admin,\n                userObject: returnObject.userObject,\n            })\n            console.log(returnObject.admin);\n            }\n          })\n        } else {\n          console.log(\"Invalid credentials\");\n        }\n      })\n    } \n    //If the child wants to register a user\n    else if (dataFromChild.register){\n      fetch(\"/api/users/\", {method: \"POST\", headers:{\"accepts\": \"application/json\", \"Content-Type\": \"application/json\"}, body: JSON.stringify({\"username\": dataFromChild.username, \"email\": dataFromChild.email, \"password\": dataFromChild.password, \"confirmPassword\": dataFromChild.confirmPassword})})\n      .then(res => res.json())\n      .then(json => {\n        if (json.token){\n           this.setState({\n             leftPanelComponent: \"LoginComponent\",\n           })\n        } else {\n          console.log(\"Invalid credentials\");\n        }\n      })\n    }\n  }\n\n  //Renders all the packs to the main screen\n  renderPacks(packs) {\n    return packs.map(pack => <PackListComponent key={pack.code} code={pack.code} name={pack.name} cards={pack.cards} cost={pack.cost} filter={this.state.packFilter}/>)\n  }\n\n  //Renders all the packs to the main screen\n  renderUserPacks(packs) {\n    return packs.map(pack => <InventoryListComponent key={pack.code} code={pack.code} name={pack.name} cards={pack.cards} filter={this.state.packFilter}/>)\n  }\n\n  handleInputChange = event => {\n    this.setState({packFilter: event.target.value})\n  }\n\n  renderFilterBar(){\n    if (this.state.rightPanelComponent == \"InventoryListComponent\" || this.state.rightPanelComponent == \"PackListComponent\"){\n      return (\n        <Form>\n          <Form.Group controlId=\"cardFilter\">\n            <Form.Label style={{color: \"white\"}}>Filter By Card Name</Form.Label>\n            <Form.Control type=\"string\" placeholder=\"\" onChange={this.handleInputChange}/>\n          </Form.Group>\n        </Form>\n      );\n    }\n  }\n\n  render() {\n\n    const {packs} = this.state;\n    return (\n      <div className=\"App\" style={{backgroundColor: \"#121212\"}}>\n        <Styles>\n          <NavbarRightPanelComponent rightPanelComponent={this.state.rightPanelComponent} callbackToParent={this.NavbarRightPanelComponentChildCallback}/>\n          <Row style={{margin: \"0 auto\"}}>\n            <Col sm={4}>\n              <NavbarLeftPanelComponent leftPanelComponent={this.state.leftPanelComponent} callbackToParent={this.NavbarLeftPanelComponentChildCallback}/>\n              {this.leftPanelComponentToRender()}\n            </Col>\n            <Col style={{marginTop: \"0.5rem\"}} sm={8}>\n              <Accordion>\n                {this.renderFilterBar()}\n                {this.rightPanelComponentToRender()}\n                {/* {this.renderPacks(this.state.packs)} */}\n              </Accordion>\n            </Col>\n          </Row>\n        </Styles>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}