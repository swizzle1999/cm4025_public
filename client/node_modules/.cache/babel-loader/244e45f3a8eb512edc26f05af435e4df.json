{"ast":null,"code":"import _classCallCheck from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import Accordion from\"react-bootstrap/Accordion\";import AccordionToggle from'react-bootstrap/AccordionToggle';import Button from\"react-bootstrap/Button\";import Card from\"react-bootstrap/Card\";import Table from'react-bootstrap/Table';import styled from\"styled-components\";var fetch=require(\"node-fetch\");var checkForLocalToken=require(\"../utils/checkForLocalToken\");// A somewhat complicated component that is recieved paramaters from parents and depending on those paramaters this component will perform diffrent actions\n//For example if this.props.itemName == \"Level Up\" then this component is used to buy a level up\nvar ShopItemListComponent=/*#__PURE__*/function(_React$Component){_inherits(ShopItemListComponent,_React$Component);function ShopItemListComponent(props){var _this;_classCallCheck(this,ShopItemListComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(ShopItemListComponent).call(this,props));_this.purchaseItem=function(){fetch(_this.props.apiCallBuy,{method:\"GET\",headers:{\"accepts\":\"application/json\",\"x-auth-token\":_this.state.token}}).then(function(res){return res.json();}).then(function(json){_this.setState({informationMessage:json.msg});});};_this.renderItem=function(){//First ensures the user has a valid token\ncheckForLocalToken.checkForLocalTokenNoUserObject().then(function(returnObject){if(returnObject!=null){_this.setState({token:returnObject.token});}})//Send token along to verify the user is who they say they are and in order to grab their inventory\n.then(function(){if(_this.state.token==null){_this.setState({informationMessage:\"Please Login To Perform This Action\"});}//API call to determine the requirments needed to purchase this item\nfetch(_this.props.apiCallRequirments,{method:\"GET\",headers:{\"accepts\":\"application/json\",\"x-auth-token\":_this.state.token}}).then(function(res){return res.json();}).then(function(json){var requirments=null;var cost=0;//The requirments are then mapped onto a HTML element that can be displayed to the user\n//Diffrent logic is applied when the shop item is a level up since a level up requires the user to open a certain ammount of cards in order to actually level up\nif(_this.props.itemName==\"Level Up\"){requirments=json.map(function(element){return React.createElement(\"p\",null,React.createElement(\"b\",null,element[0]+\":\"),React.createElement(\"br\",null),\"Have: \"+element[1]+\"/\"+element[2],React.createElement(\"br\",null),\" Need: \"+element[3]+\"/\"+element[2]);});}//Anything that is not a simple level up just requires a certain ammount of money to purchase\nelse if(_this.props.itemName!=\"Level Up\"){cost=json.nextLevelCost;if(json.msg){requirments=React.createElement(\"p\",null,React.createElement(\"b\",null,\"Current Level: \"+json.currentLevel+\"/\"+json.maxLevel,React.createElement(\"br\",null)));_this.setState({informationMessage:json.msg});}else{requirments=React.createElement(\"p\",null,React.createElement(\"b\",null,\"Current Level: \"+json.currentLevel+\"/\"+json.maxLevel,React.createElement(\"br\",null),\"Next Level Cost: \"+json.nextLevelCost,React.createElement(\"br\",null),\"Next Level Effect: +\"+json.nextLevelEffect));_this.setState({informationMessage:\"\"});}}//Simple error message to show if something is wrong like the this.props.itemName\nelse{requirments=\"Check ShopItemListComponent. You made a goof\";}//Set state of the item name, the items requirments and then a cost button to actually purchase the item. This state is in HTML so it can be displayed in the render function \n_this.setState({itemsComponents:React.createElement(\"tr\",null,React.createElement(\"td\",null,_this.props.itemName),React.createElement(\"td\",null,requirments),React.createElement(\"td\",null,React.createElement(Button,{variant:\"success\",onClick:_this.purchaseItem},\"$\",cost)))});});});};_this.requirmentsCall=function(){};_this.state={token:null,itemsComponents:null,informationMessage:\"\"};return _this;}_createClass(ShopItemListComponent,[{key:\"componentDidMount\",value:function componentDidMount(){}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.shouldForceUpdate!=prevProps.shouldForceUpdate){this.renderItem();}}//Function to actually call the API to make a purchace\n//Uses the props passed by the parent to decide what API route to call\n},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(Card,null,React.createElement(Card.Header,null,React.createElement(AccordionToggle,{as:Button,onClick:this.renderItem,variant:\"link\",eventKey:this.props.itemName},this.props.itemName)),React.createElement(Accordion.Collapse,{eventKey:this.props.itemName},React.createElement(Card.Body,null,React.createElement(Table,{striped:true,bordered:true,hover:true},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Item Name\"),React.createElement(\"th\",null,\"Description\"),React.createElement(\"th\",null,\"Cost\"))),React.createElement(\"tbody\",null,this.state.itemsComponents)),this.state.informationMessage))));}}]);return ShopItemListComponent;}(React.Component);export{ShopItemListComponent as default};","map":{"version":3,"sources":["D:/Users/swizzle1999/Documents/Programming/MERN/cm4025/client/src/components/ShopItemListComponent.js"],"names":["React","Accordion","AccordionToggle","Button","Card","Table","styled","fetch","require","checkForLocalToken","ShopItemListComponent","props","purchaseItem","apiCallBuy","method","headers","state","token","then","res","json","setState","informationMessage","msg","renderItem","checkForLocalTokenNoUserObject","returnObject","apiCallRequirments","requirments","cost","itemName","map","element","nextLevelCost","currentLevel","maxLevel","nextLevelEffect","itemsComponents","requirmentsCall","prevProps","shouldForceUpdate","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Accordion from \"react-bootstrap/Accordion\";\r\nimport AccordionToggle from 'react-bootstrap/AccordionToggle';\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Table from 'react-bootstrap/Table';\r\nimport styled from \"styled-components\";\r\n\r\nconst fetch = require(\"node-fetch\");\r\nconst checkForLocalToken = require(\"../utils/checkForLocalToken\");\r\n\r\n// A somewhat complicated component that is recieved paramaters from parents and depending on those paramaters this component will perform diffrent actions\r\n//For example if this.props.itemName == \"Level Up\" then this component is used to buy a level up\r\nexport default class ShopItemListComponent extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            token: null,\r\n            itemsComponents: null,\r\n            informationMessage: \"\",\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        \r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if (this.props.shouldForceUpdate != prevProps.shouldForceUpdate){\r\n            this.renderItem();\r\n        }\r\n    }\r\n\r\n    //Function to actually call the API to make a purchace\r\n    //Uses the props passed by the parent to decide what API route to call\r\n    purchaseItem = () => {\r\n        fetch(this.props.apiCallBuy, {method: \"GET\", headers:{\"accepts\": \"application/json\", \"x-auth-token\": this.state.token}})\r\n        .then(res => res.json())\r\n        .then(json => {\r\n            this.setState({informationMessage: json.msg})\r\n        });\r\n    }\r\n\r\n    //Function renders the individual shop item\r\n    renderItem = () => {\r\n        //First ensures the user has a valid token\r\n        checkForLocalToken.checkForLocalTokenNoUserObject()\r\n        .then(returnObject => {\r\n          if (returnObject != null){\r\n            this.setState({\r\n              token: returnObject.token,\r\n            })\r\n          }\r\n        })\r\n        //Send token along to verify the user is who they say they are and in order to grab their inventory\r\n        .then(() => {\r\n            if (this.state.token == null){\r\n                this.setState({informationMessage: \"Please Login To Perform This Action\"})\r\n            }\r\n\r\n            //API call to determine the requirments needed to purchase this item\r\n            fetch(this.props.apiCallRequirments, {method: \"GET\", headers:{\"accepts\": \"application/json\", \"x-auth-token\": this.state.token}})\r\n            .then(res => res.json())\r\n            .then(json => {\r\n\r\n                let requirments = null;\r\n                let cost = 0;\r\n                //The requirments are then mapped onto a HTML element that can be displayed to the user\r\n                //Diffrent logic is applied when the shop item is a level up since a level up requires the user to open a certain ammount of cards in order to actually level up\r\n                if (this.props.itemName == \"Level Up\"){\r\n                    requirments = json.map(element => <p><b>{element[0] + \":\"}</b><br/>{\"Have: \" + element[1] + \"/\" + element[2]}<br/>{\" Need: \" + element[3] + \"/\" + element[2]}</p>)\r\n                } \r\n                //Anything that is not a simple level up just requires a certain ammount of money to purchase\r\n                else if (this.props.itemName != \"Level Up\"){\r\n                    cost = json.nextLevelCost;\r\n                    if (json.msg){\r\n                        requirments = <p><b>{\"Current Level: \" + json.currentLevel + \"/\" + json.maxLevel}<br/></b></p>\r\n                        this.setState({informationMessage: json.msg})\r\n                    } else {\r\n                        requirments = <p><b>{\"Current Level: \" + json.currentLevel + \"/\" + json.maxLevel}<br/>{\"Next Level Cost: \" + json.nextLevelCost}<br/>{\"Next Level Effect: +\" + json.nextLevelEffect}</b></p>\r\n                        this.setState({informationMessage: \"\"})\r\n                    }\r\n                }\r\n                //Simple error message to show if something is wrong like the this.props.itemName\r\n                else {\r\n                    requirments = \"Check ShopItemListComponent. You made a goof\"\r\n                }\r\n\r\n                //Set state of the item name, the items requirments and then a cost button to actually purchase the item. This state is in HTML so it can be displayed in the render function \r\n                this.setState({\r\n                    itemsComponents: \r\n                        <tr>\r\n                            <td>{this.props.itemName}</td>\r\n                            <td>{requirments}</td>\r\n                            <td><Button variant=\"success\" onClick={this.purchaseItem}>${cost}</Button></td>\r\n                        </tr>\r\n                })\r\n            })\r\n        });\r\n            \r\n    }\r\n\r\n    requirmentsCall = () => {\r\n        \r\n    }\r\n\r\n    render() {   \r\n        return (\r\n            <div>\r\n                <Card>\r\n                    <Card.Header>\r\n                        <AccordionToggle as={Button} onClick={this.renderItem} variant=\"link\" eventKey={this.props.itemName}>\r\n                            {this.props.itemName}\r\n                        </AccordionToggle>\r\n                    </Card.Header>\r\n                    <Accordion.Collapse eventKey={this.props.itemName}>\r\n                        <Card.Body>\r\n                            <Table striped bordered hover>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Item Name</th>\r\n                                        <th>Description</th>\r\n                                        <th>Cost</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {this.state.itemsComponents}\r\n                                </tbody>\r\n                            </Table>\r\n                            {this.state.informationMessage}\r\n                        </Card.Body>\r\n                    </Accordion.Collapse>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}