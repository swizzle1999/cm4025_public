{"ast":null,"code":"//Component to check if the browser has a token stored we can use to log them in\nfunction checkForLocalToken() {\n  //Get token from local storage\n  const token = getFromStorage(\"PokePacksOnline\"); //If the token exists\n\n  if (token) {\n    //Verify the token\n    let headers = {\n      \"x-auth-token\": token\n    };\n    fetch(\"api/auth/user\", {\n      method: \"GET\",\n      headers: headers\n    }).then(res => res.json()).then(json => {\n      //Check if the response contains a user, if it does, then it was a valid token\n      if (json._id) {\n        //Set state so we can display the users details\n        this.setState({\n          token: token,\n          username: json.username\n        });\n      }\n    });\n  } //If no token was found\n  else {\n      console.log(\"no token\");\n      this.setState({\n        token: \"\"\n      });\n    }\n}\n\nexports.ticker = ticker();","map":{"version":3,"sources":["D:/Users/swizzle1999/Documents/Programming/MERN/cm4025/src/utils/checkForLocalToken.js"],"names":["checkForLocalToken","token","getFromStorage","headers","fetch","method","then","res","json","_id","setState","username","console","log","exports","ticker"],"mappings":"AAAA;AACA,SAASA,kBAAT,GAA6B;AACzB;AACA,QAAMC,KAAK,GAAGC,cAAc,CAAC,iBAAD,CAA5B,CAFyB,CAGzB;;AACA,MAAID,KAAJ,EAAW;AACT;AACA,QAAIE,OAAO,GAAG;AACZ,sBAAgBF;AADJ,KAAd;AAGAG,IAAAA,KAAK,CAAC,eAAD,EAAkB;AAACC,MAAAA,MAAM,EAAE,KAAT;AAAgBF,MAAAA,OAAO,EAAEA;AAAzB,KAAlB,CAAL,CACCG,IADD,CACMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAEME,IAAI,IAAI;AACZ;AACA,UAAIA,IAAI,CAACC,GAAT,EAAa;AACX;AACA,aAAKC,QAAL,CAAc;AACZT,UAAAA,KAAK,EAAEA,KADK;AAEZU,UAAAA,QAAQ,EAAEH,IAAI,CAACG;AAFH,SAAd;AAID;AACF,KAXD;AAaD,GAlBD,CAmBA;AAnBA,OAoBK;AACHC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACA,WAAKH,QAAL,CAAc;AACZT,QAAAA,KAAK,EAAE;AADK,OAAd;AAGD;AACF;;AAEDa,OAAO,CAACC,MAAR,GAAiBA,MAAM,EAAvB","sourcesContent":["//Component to check if the browser has a token stored we can use to log them in\r\nfunction checkForLocalToken(){\r\n    //Get token from local storage\r\n    const token = getFromStorage(\"PokePacksOnline\");\r\n    //If the token exists\r\n    if (token) {\r\n      //Verify the token\r\n      let headers = {\r\n        \"x-auth-token\": token\r\n      }\r\n      fetch(\"api/auth/user\", {method: \"GET\", headers: headers})\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        //Check if the response contains a user, if it does, then it was a valid token\r\n        if (json._id){\r\n          //Set state so we can display the users details\r\n          this.setState({\r\n            token: token,\r\n            username: json.username,\r\n          })\r\n        }\r\n      })\r\n\r\n    } \r\n    //If no token was found\r\n    else {\r\n      console.log(\"no token\");\r\n      this.setState({\r\n        token: \"\",\r\n      })\r\n    }\r\n  }\r\n\r\n  exports.ticker = ticker();"]},"metadata":{},"sourceType":"module"}