{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\src\\\\App.js\";\nimport React from 'react';\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Col from \"react-bootstrap/Col\";\nimport Form from 'react-bootstrap/Form';\nimport Row from \"react-bootstrap/Row\";\nimport styled from \"styled-components\";\nimport './App.css';\nimport AddPackComponent from \"./components/AddPackComponent\";\nimport AdminComponent from \"./components/AdminComponent\";\nimport InventoryListComponent from \"./components/InventoryListComponent\";\nimport LoginComponent from './components/LoginComponent';\nimport NavbarLeftPanelComponent from './components/NavbarLeftPanelComponent';\nimport NavbarRightPanelComponent from './components/NavbarRightPanelComponent';\nimport PackListComponent from \"./components/PackListComponent\";\nimport PlayerStatsComponent from './components/PlayerStatsComponent';\nimport RegisterComponent from './components/RegisterComponent';\nimport ShopComponent from \"./components/ShopComponent\";\nimport { setInStorage } from \"./utils/storage\";\n\nconst checkForLocalToken = require(\"./utils/checkForLocalToken\");\n\nconst sortPacksByLevel = require(\"./utils/sortPacksByLevel\");\n\nconst fetch = require(\"node-fetch\");\n\nconst Styles = styled.div`\n.col-sm-4 {\n    padding-left: 0 !important;\n    height: 100vh;\n}\n`;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.NavbarRightPanelComponentChildCallback = dataFromChild => {\n      if (dataFromChild.openPacks) {\n        this.setState({\n          rightPanelComponent: \"PackListComponent\"\n        });\n      } else if (dataFromChild.inventory) {\n        this.setState({\n          rightPanelComponent: \"InventoryListComponent\"\n        });\n      } else if (dataFromChild.addPack) {\n        this.setState({\n          rightPanelComponent: \"AddPackComponent\"\n        });\n      } else if (dataFromChild.admin) {\n        //Yes a client could modify this and get access to the admin panel\n        //But all the API calls from the admin panel are protected serverside with tokens so it dosent actually matter if they can acess it. They get no important information nor can they actually send any requests from it\n        //This is here just because it makes sense for a user not to be able to instantly click into an admin panel\n        if (this.state.admin == true) {\n          this.setState({\n            rightPanelComponent: \"AdminComponent\"\n          });\n        }\n      }\n    };\n\n    this.NavbarLeftPanelComponentChildCallback = dataFromChild => {\n      if (dataFromChild.logOut) {\n        setInStorage(\"PokePacksOnline\", \"\");\n        this.setState({\n          token: \"\",\n          userObject: {}\n        });\n      } else if (dataFromChild.playerStats) {\n        this.setState({\n          leftPanelComponent: \"PlayerStatsComponent\"\n        });\n      } else if (dataFromChild.shop) {\n        this.setState({\n          leftPanelComponent: \"ShopComponent\"\n        });\n      }\n    };\n\n    this.leftPanelComponentChildCallback = dataFromChild => {\n      //if the child is telling the parent to load a new component\n      if (dataFromChild.componentToLoad) {\n        this.setState({\n          leftPanelComponent: dataFromChild.componentToLoad\n        });\n      } //If the child wants to log a user in\n      else if (dataFromChild.login) {\n          fetch(\"/api/auth/\", {\n            method: \"POST\",\n            headers: {\n              \"accepts\": \"application/json\",\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              \"email\": dataFromChild.email,\n              \"password\": dataFromChild.password\n            })\n          }).then(res => res.json()).then(json => {\n            if (json.token) {\n              setInStorage(\"PokePacksOnline\", json.token);\n              this.setState({\n                leftPanelComponent: \"PlayerStatsComponent\"\n              }); //Get token from local storage and then fetch the users details from the database which is then set in state\n\n              checkForLocalToken.checkForLocalToken().then(returnObject => {\n                if (returnObject != null) {\n                  this.setState({\n                    token: returnObject.token,\n                    admin: returnObject.admin,\n                    userObject: returnObject.userObject\n                  });\n                  console.log(returnObject.admin);\n                }\n              });\n            } else {\n              console.log(\"Invalid credentials\");\n            }\n          });\n        } //If the child wants to register a user\n        else if (dataFromChild.register) {\n            fetch(\"/api/users/\", {\n              method: \"POST\",\n              headers: {\n                \"accepts\": \"application/json\",\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                \"username\": dataFromChild.username,\n                \"email\": dataFromChild.email,\n                \"password\": dataFromChild.password,\n                \"confirmPassword\": dataFromChild.confirmPassword\n              })\n            }).then(res => res.json()).then(json => {\n              if (json.token) {\n                this.setState({\n                  leftPanelComponent: \"LoginComponent\"\n                });\n              } else {\n                console.log(\"Invalid credentials\");\n              }\n            });\n          }\n    };\n\n    this.handleInputChange = event => {\n      this.setState({\n        packFilter: event.target.value\n      });\n    };\n\n    this.state = {\n      time: Date.now(),\n      packs: [],\n      token: \"\",\n      admin: false,\n      userObject: {},\n      leftPanelComponent: \"PlayerStatsComponent\",\n      rightPanelComponent: \"PackListComponent\",\n      packFilter: \"\"\n    };\n  }\n\n  componentDidMount() {\n    //Quick check to see if the user has an existing token\n    checkForLocalToken.checkForLocalToken().then(returnObject => {\n      if (returnObject != null) {\n        this.setState({\n          token: returnObject.token,\n          admin: returnObject.userObject.admin,\n          userObject: returnObject.userObject\n        });\n      }\n    }); //Fetch all the packs that exist in the database to be displayed\n\n    fetch(\"/api/packs\", {\n      method: \"GET\",\n      headers: {\n        \"accepts\": \"application/json\"\n      }\n    }).then(res => res.json()).then(json => {\n      let packArray = this.state.packs;\n\n      for (let i = 0; i < json.packs.length; i++) {\n        packArray.push(json.packs[i]);\n      }\n\n      packArray.sort(sortPacksByLevel.compare);\n      this.setState({\n        packs: packArray\n      });\n    });\n  } //Function that is used to change what renders on the left panel\n\n\n  leftPanelComponentToRender() {\n    switch (this.state.leftPanelComponent) {\n      case \"LoginComponent\":\n        if (this.state.token) {\n          this.setState({\n            leftPanelComponent: \"PlayerStatsComponent\"\n          });\n        } else {\n          return React.createElement(LoginComponent, {\n            callbackToParent: this.leftPanelComponentChildCallback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 87\n            },\n            __self: this\n          });\n        }\n\n      case \"RegisterComponent\":\n        return React.createElement(RegisterComponent, {\n          callbackToParent: this.leftPanelComponentChildCallback,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        });\n\n      case \"PlayerStatsComponent\":\n        if (this.state.token) {\n          return React.createElement(PlayerStatsComponent, {\n            token: this.state.token,\n            callbackToParent: this.leftPanelComponentChildCallback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            },\n            __self: this\n          });\n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\"\n          }); // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n\n      case \"ShopComponent\":\n        if (this.state.token) {\n          return React.createElement(ShopComponent, {\n            token: this.state.token,\n            callbackToParent: this.leftPanelComponentChildCallback,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          });\n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\"\n          }); // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n\n    }\n  }\n\n  rightPanelComponentToRender() {\n    switch (this.state.rightPanelComponent) {\n      case \"PackListComponent\":\n        return this.renderPacks(this.state.packs);\n\n      case \"InventoryListComponent\":\n        if (this.state.token) {\n          return this.renderUserPacks(this.state.packs);\n        } else {\n          this.setState({\n            rightPanelComponent: \"PackListComponent\"\n          });\n        }\n\n      case \"AddPackComponent\":\n        return React.createElement(AddPackComponent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        });\n\n      case \"AdminComponent\":\n        return React.createElement(AdminComponent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        });\n    }\n  }\n\n  //Renders all the packs to the main screen\n  renderPacks(packs) {\n    return packs.map(pack => React.createElement(PackListComponent, {\n      key: pack.code,\n      code: pack.code,\n      name: pack.name,\n      cards: pack.cards,\n      cost: pack.cost,\n      level: pack.level,\n      filter: this.state.packFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }));\n  } //Renders all the packs to the main screen\n\n\n  renderUserPacks(packs) {\n    return packs.map(pack => React.createElement(InventoryListComponent, {\n      key: pack.code,\n      code: pack.code,\n      name: pack.name,\n      cards: pack.cards,\n      filter: this.state.packFilter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }));\n  }\n\n  renderFilterBar() {\n    if (this.state.rightPanelComponent == \"InventoryListComponent\" || this.state.rightPanelComponent == \"PackListComponent\") {\n      return React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"cardFilter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        style: {\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Filter By Card Name\"), React.createElement(Form.Control, {\n        type: \"string\",\n        placeholder: \"\",\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      })));\n    }\n  }\n\n  render() {\n    const {\n      packs\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: \"App\",\n      style: {\n        backgroundColor: \"#121212\",\n        height: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(Styles, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(NavbarRightPanelComponent, {\n      rightPanelComponent: this.state.rightPanelComponent,\n      callbackToParent: this.NavbarRightPanelComponentChildCallback,\n      admin: this.state.admin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), React.createElement(Row, {\n      style: {\n        margin: \"0 auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(NavbarLeftPanelComponent, {\n      leftPanelComponent: this.state.leftPanelComponent,\n      callbackToParent: this.NavbarLeftPanelComponentChildCallback,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }), this.leftPanelComponentToRender()), React.createElement(Col, {\n      style: {\n        marginTop: \"0.5rem\"\n      },\n      sm: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(Accordion, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, this.renderFilterBar(), this.rightPanelComponentToRender())))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/Users/swizzle1999/Documents/Programming/MERN/cm4025/client/src/App.js"],"names":["React","Accordion","Col","Form","Row","styled","AddPackComponent","AdminComponent","InventoryListComponent","LoginComponent","NavbarLeftPanelComponent","NavbarRightPanelComponent","PackListComponent","PlayerStatsComponent","RegisterComponent","ShopComponent","setInStorage","checkForLocalToken","require","sortPacksByLevel","fetch","Styles","div","App","Component","constructor","props","NavbarRightPanelComponentChildCallback","dataFromChild","openPacks","setState","rightPanelComponent","inventory","addPack","admin","state","NavbarLeftPanelComponentChildCallback","logOut","token","userObject","playerStats","leftPanelComponent","shop","leftPanelComponentChildCallback","componentToLoad","login","method","headers","body","JSON","stringify","email","password","then","res","json","returnObject","console","log","register","username","confirmPassword","handleInputChange","event","packFilter","target","value","time","Date","now","packs","componentDidMount","packArray","i","length","push","sort","compare","leftPanelComponentToRender","rightPanelComponentToRender","renderPacks","renderUserPacks","map","pack","code","name","cards","cost","level","renderFilterBar","color","render","backgroundColor","height","margin","marginTop"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Col from \"react-bootstrap/Col\";\nimport Form from 'react-bootstrap/Form';\nimport Row from \"react-bootstrap/Row\";\nimport styled from \"styled-components\";\nimport './App.css';\nimport AddPackComponent from \"./components/AddPackComponent\";\nimport AdminComponent from \"./components/AdminComponent\";\nimport InventoryListComponent from \"./components/InventoryListComponent\";\nimport LoginComponent from './components/LoginComponent';\nimport NavbarLeftPanelComponent from './components/NavbarLeftPanelComponent';\nimport NavbarRightPanelComponent from './components/NavbarRightPanelComponent';\nimport PackListComponent from \"./components/PackListComponent\";\nimport PlayerStatsComponent from './components/PlayerStatsComponent';\nimport RegisterComponent from './components/RegisterComponent';\nimport ShopComponent from \"./components/ShopComponent\";\nimport { setInStorage } from \"./utils/storage\";\n\n\n\nconst checkForLocalToken = require(\"./utils/checkForLocalToken\");\nconst sortPacksByLevel = require(\"./utils/sortPacksByLevel\");\n\nconst fetch = require(\"node-fetch\");\n\nconst Styles = styled.div`\n.col-sm-4 {\n    padding-left: 0 !important;\n    height: 100vh;\n}\n`\n\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      time: Date.now(),\n      packs: [],\n      token: \"\",\n      admin: false,\n      userObject: {},\n      leftPanelComponent: \"PlayerStatsComponent\",\n      rightPanelComponent: \"PackListComponent\",\n      packFilter: \"\",\n    }\n  }\n\n\n  componentDidMount(){\n    //Quick check to see if the user has an existing token\n    checkForLocalToken.checkForLocalToken()\n    .then(returnObject => {\n      if (returnObject != null){\n        this.setState({\n          token: returnObject.token,\n          admin: returnObject.userObject.admin,\n          userObject: returnObject.userObject,\n      })\n      }\n    })\n\n    //Fetch all the packs that exist in the database to be displayed\n    fetch(\"/api/packs\", {method: \"GET\", headers:{\"accepts\": \"application/json\"}})\n      .then(res => res.json())\n      .then(json => {\n        let packArray = this.state.packs\n        for (let i = 0; i < json.packs.length; i++){\n          packArray.push(json.packs[i]);\n        }\n        packArray.sort(sortPacksByLevel.compare)\n        this.setState({packs: packArray});\n      })\n\n  }\n\n  //Function that is used to change what renders on the left panel\n  leftPanelComponentToRender(){\n    switch(this.state.leftPanelComponent){\n      case \"LoginComponent\":\n        if(this.state.token){\n          this.setState({\n            leftPanelComponent: \"PlayerStatsComponent\",\n          })\n        } else {\n          return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n      case \"RegisterComponent\":\n        return <RegisterComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n      case \"PlayerStatsComponent\":\n        if(this.state.token){\n          return <PlayerStatsComponent token={this.state.token} callbackToParent={this.leftPanelComponentChildCallback}/>  \n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\",\n          })\n          // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n      case \"ShopComponent\":\n        if(this.state.token){\n          return <ShopComponent token={this.state.token} callbackToParent={this.leftPanelComponentChildCallback}/>  \n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\",\n          })\n          // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n    }\n  }\n\n  rightPanelComponentToRender(){\n    switch(this.state.rightPanelComponent){\n      case \"PackListComponent\":\n        return this.renderPacks(this.state.packs)\n      case \"InventoryListComponent\":\n        if (this.state.token){\n          return this.renderUserPacks(this.state.packs);\n        } else {\n          this.setState({\n            rightPanelComponent: \"PackListComponent\",\n          })\n        }\n      case \"AddPackComponent\":\n        return <AddPackComponent />\n      case \"AdminComponent\":\n        return <AdminComponent />\n\n    }\n  }\n\n  NavbarRightPanelComponentChildCallback = dataFromChild => {\n    if (dataFromChild.openPacks){\n      this.setState({\n        rightPanelComponent: \"PackListComponent\",\n      })\n    }else if (dataFromChild.inventory){\n      this.setState({\n        rightPanelComponent: \"InventoryListComponent\",\n      })\n    }else if (dataFromChild.addPack){\n      this.setState({\n        rightPanelComponent: \"AddPackComponent\",\n      })\n    }else if (dataFromChild.admin){\n      //Yes a client could modify this and get access to the admin panel\n      //But all the API calls from the admin panel are protected serverside with tokens so it dosent actually matter if they can acess it. They get no important information nor can they actually send any requests from it\n      //This is here just because it makes sense for a user not to be able to instantly click into an admin panel\n      if (this.state.admin == true) {\n        this.setState({\n          rightPanelComponent: \"AdminComponent\",\n        })\n      }\n    }\n  }\n\n  NavbarLeftPanelComponentChildCallback = dataFromChild => {\n    if (dataFromChild.logOut){\n      setInStorage(\"PokePacksOnline\", \"\");\n      this.setState({\n        token: \"\",\n        userObject: {},\n      })\n    } \n    else if (dataFromChild.playerStats){\n      this.setState({\n        leftPanelComponent: \"PlayerStatsComponent\",\n      })\n    }\n    else if (dataFromChild.shop){\n      this.setState({\n        leftPanelComponent: \"ShopComponent\",\n      })\n    }\n  }\n\n  //The callback all components that use the left panel use to communicate with the parent (this)\n  leftPanelComponentChildCallback = dataFromChild => {\n    //if the child is telling the parent to load a new component\n    if (dataFromChild.componentToLoad){\n      this.setState({\n        leftPanelComponent: dataFromChild.componentToLoad,\n      })\n    } \n    //If the child wants to log a user in\n    else if(dataFromChild.login) {\n      fetch(\"/api/auth/\", {method: \"POST\", headers:{\"accepts\": \"application/json\", \"Content-Type\": \"application/json\"}, body: JSON.stringify({\"email\": dataFromChild.email, \"password\": dataFromChild.password})})\n      .then(res => res.json())\n      .then(json => {\n        if (json.token){\n           setInStorage(\"PokePacksOnline\", json.token);\n           this.setState({\n            leftPanelComponent: \"PlayerStatsComponent\",\n            })\n          //Get token from local storage and then fetch the users details from the database which is then set in state\n          checkForLocalToken.checkForLocalToken()\n          .then(returnObject => {\n            if (returnObject != null){\n              this.setState({\n                token: returnObject.token,\n                admin: returnObject.admin,\n                userObject: returnObject.userObject,\n            })\n            console.log(returnObject.admin);\n            }\n          })\n        } else {\n          console.log(\"Invalid credentials\");\n        }\n      })\n    } \n    //If the child wants to register a user\n    else if (dataFromChild.register){\n      fetch(\"/api/users/\", {method: \"POST\", headers:{\"accepts\": \"application/json\", \"Content-Type\": \"application/json\"}, body: JSON.stringify({\"username\": dataFromChild.username, \"email\": dataFromChild.email, \"password\": dataFromChild.password, \"confirmPassword\": dataFromChild.confirmPassword})})\n      .then(res => res.json())\n      .then(json => {\n        if (json.token){\n           this.setState({\n             leftPanelComponent: \"LoginComponent\",\n           })\n        } else {\n          console.log(\"Invalid credentials\");\n        }\n      })\n    }\n  }\n\n  //Renders all the packs to the main screen\n  renderPacks(packs) {\n    return packs.map(pack => <PackListComponent key={pack.code} code={pack.code} name={pack.name} cards={pack.cards} cost={pack.cost} level={pack.level} filter={this.state.packFilter}/>)\n  }\n\n  //Renders all the packs to the main screen\n  renderUserPacks(packs) {\n    return packs.map(pack => <InventoryListComponent key={pack.code} code={pack.code} name={pack.name} cards={pack.cards} filter={this.state.packFilter}/>)\n  }\n\n  handleInputChange = event => {\n    this.setState({packFilter: event.target.value})\n  }\n\n  renderFilterBar(){\n    if (this.state.rightPanelComponent == \"InventoryListComponent\" || this.state.rightPanelComponent == \"PackListComponent\"){\n      return (\n        <Form>\n          <Form.Group controlId=\"cardFilter\">\n            <Form.Label style={{color: \"white\"}}>Filter By Card Name</Form.Label>\n            <Form.Control type=\"string\" placeholder=\"\" onChange={this.handleInputChange}/>\n          </Form.Group>\n        </Form>\n      );\n    }\n  }\n\n  render() {\n\n    const {packs} = this.state;\n    return (\n      <div className=\"App\" style={{backgroundColor: \"#121212\", height: \"100%\"}}>\n        <Styles>\n          <NavbarRightPanelComponent rightPanelComponent={this.state.rightPanelComponent} callbackToParent={this.NavbarRightPanelComponentChildCallback} admin={this.state.admin}/>\n          <Row style={{margin: \"0 auto\"}}>\n            <Col>\n              <NavbarLeftPanelComponent leftPanelComponent={this.state.leftPanelComponent} callbackToParent={this.NavbarLeftPanelComponentChildCallback}/>\n              {this.leftPanelComponentToRender()}\n            </Col>\n            <Col style={{marginTop: \"0.5rem\"}} sm={8}>\n              <Accordion>\n                {this.renderFilterBar()}\n                {this.rightPanelComponentToRender()}\n                {/* {this.renderPacks(this.state.packs)} */}\n              </Accordion>\n            </Col>\n          </Row>\n        </Styles>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}