{"ast":null,"code":"import { getFromStorage, setInStorage } from \"./storage\"; //Component to check if the browser has a token stored we can use to log them in\n\nexport function checkForLocalToken() {\n  return new Promise(function (resolve, reject) {\n    //Get token from local storage\n    const token = getFromStorage(\"PokePacksOnline\"); //If the token exists\n\n    if (token) {\n      //Verify the token\n      let headers = {\n        \"x-auth-token\": token\n      };\n      fetch(\"api/auth/user\", {\n        method: \"GET\",\n        headers: headers\n      }).then(res => res.json()).then(json => {\n        //Check if the response contains a user, if it does, then it was a valid token\n        if (json._id) {\n          //Set state so we can display the users details\n          let returnObject = {\n            \"token\": token,\n            \"userObject\": json\n          };\n          resolve(json); //   this.setState({\n          //   })\n        }\n      });\n    } //If no token was found\n    else {\n        console.log(\"no token\");\n        resolve(null);\n      }\n  });\n}","map":{"version":3,"sources":["D:/Users/swizzle1999/Documents/Programming/MERN/cm4025/src/utils/checkForLocalToken.js"],"names":["getFromStorage","setInStorage","checkForLocalToken","Promise","resolve","reject","token","headers","fetch","method","then","res","json","_id","returnObject","console","log"],"mappings":"AAAA,SACIA,cADJ,EAEIC,YAFJ,QAGS,WAHT,C,CAKA;;AACA,OAAO,SAASC,kBAAT,GAA6B;AAChC,SAAO,IAAIC,OAAJ,CAAa,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC1C;AACJ,UAAMC,KAAK,GAAGN,cAAc,CAAC,iBAAD,CAA5B,CAF8C,CAG9C;;AACA,QAAIM,KAAJ,EAAW;AACT;AACA,UAAIC,OAAO,GAAG;AACZ,wBAAgBD;AADJ,OAAd;AAGAE,MAAAA,KAAK,CAAC,eAAD,EAAkB;AAACC,QAAAA,MAAM,EAAE,KAAT;AAAgBF,QAAAA,OAAO,EAAEA;AAAzB,OAAlB,CAAL,CACCG,IADD,CACMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAEME,IAAI,IAAI;AACZ;AACA,YAAIA,IAAI,CAACC,GAAT,EAAa;AACX;AACA,cAAIC,YAAY,GAAG;AACjB,qBAASR,KADQ;AAEjB,0BAAcM;AAFG,WAAnB;AAIAR,UAAAA,OAAO,CAACQ,IAAD,CAAP,CANW,CAOb;AAEA;AACC;AACF,OAfD;AAiBD,KAtBD,CAuBA;AAvBA,SAwBK;AACHG,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACEZ,QAAAA,OAAO,CAAC,IAAD,CAAP;AACH;AACA,GAhCM,CAAP;AAkCD","sourcesContent":["import {\r\n    getFromStorage,\r\n    setInStorage\r\n  } from \"./storage\"\r\n\r\n//Component to check if the browser has a token stored we can use to log them in\r\nexport function checkForLocalToken(){\r\n    return new Promise((function(resolve, reject) {\r\n        //Get token from local storage\r\n    const token = getFromStorage(\"PokePacksOnline\");\r\n    //If the token exists\r\n    if (token) {\r\n      //Verify the token\r\n      let headers = {\r\n        \"x-auth-token\": token\r\n      }\r\n      fetch(\"api/auth/user\", {method: \"GET\", headers: headers})\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        //Check if the response contains a user, if it does, then it was a valid token\r\n        if (json._id){\r\n          //Set state so we can display the users details\r\n          let returnObject = {\r\n            \"token\": token,\r\n            \"userObject\": json\r\n          }\r\n          resolve(json);\r\n        //   this.setState({\r\n            \r\n        //   })\r\n        }\r\n      })\r\n\r\n    } \r\n    //If no token was found\r\n    else {\r\n      console.log(\"no token\");\r\n        resolve(null);\r\n    }\r\n    }));\r\n    \r\n  }\r\n"]},"metadata":{},"sourceType":"module"}