{"ast":null,"code":"import _classCallCheck from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _taggedTemplateLiteral from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n.col-sm-4 {\\n    padding-left: 0 !important;\\n}\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from'react';import{BrowserRouter as Router,Route}from\"react-router-dom\";import'./App.css';import{render}from'@testing-library/react';import ReactCSSTransitionGroup from'react-addons-css-transition-group';import Container from\"react-bootstrap/Container\";import Col from\"react-bootstrap/Col\";import Row from\"react-bootstrap/Row\";import Accordion from\"react-bootstrap/Accordion\";import Form from'react-bootstrap/Form';import Card from\"react-bootstrap/Card\";import AccordionToggle from'react-bootstrap/AccordionToggle';import Button from'react-bootstrap/Button';import styled from\"styled-components\";import{getFromStorage,setInStorage}from\"./utils/storage\";//Component Imports\nimport NavbarRightPanelComponent from'./components/NavbarRightPanelComponent';import NavbarLeftPanelComponent from'./components/NavbarLeftPanelComponent';import PlayerStatsComponent from'./components/PlayerStatsComponent';import LoginComponent from'./components/LoginComponent';import RegisterComponent from'./components/RegisterComponent';import PackListComponent from\"./components/PackListComponent\";import InventoryListComponent from\"./components/InventoryListComponent\";import AddPackComponent from\"./components/AddPackComponent\";import AdminComponent from\"./components/AdminComponent\";import ShopComponent from\"./components/ShopComponent\";var checkForLocalToken=require(\"./utils/checkForLocalToken\");var fetch=require(\"node-fetch\");var Styles=styled.div(_templateObject());var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.NavbarRightPanelComponentChildCallback=function(dataFromChild){if(dataFromChild.openPacks){_this.setState({rightPanelComponent:\"PackListComponent\"});}else if(dataFromChild.inventory){_this.setState({rightPanelComponent:\"InventoryListComponent\"});}else if(dataFromChild.addPack){_this.setState({rightPanelComponent:\"AddPackComponent\"});}else if(dataFromChild.admin){_this.setState({rightPanelComponent:\"AdminComponent\"});}};_this.NavbarLeftPanelComponentChildCallback=function(dataFromChild){if(dataFromChild.logOut){setInStorage(\"PokePacksOnline\",\"\");_this.setState({token:\"\",userObject:{}});}else if(dataFromChild.playerStats){_this.setState({leftPanelComponent:\"PlayerStatsComponent\"});}else if(dataFromChild.shop){_this.setState({leftPanelComponent:\"ShopComponent\"});}};_this.leftPanelComponentChildCallback=function(dataFromChild){//if the child is telling the parent to load a new component\nif(dataFromChild.componentToLoad){_this.setState({leftPanelComponent:dataFromChild.componentToLoad});}//If the child wants to log a user in\nelse if(dataFromChild.login){fetch(\"/api/auth/\",{method:\"POST\",headers:{\"accepts\":\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({\"email\":dataFromChild.email,\"password\":dataFromChild.password})}).then(function(res){return res.json();}).then(function(json){if(json.token){setInStorage(\"PokePacksOnline\",json.token);_this.setState({leftPanelComponent:\"PlayerStatsComponent\"});//Get token from local storage and then fetch the users details from the database which is then set in state\ncheckForLocalToken.checkForLocalToken().then(function(returnObject){if(returnObject!=null){_this.setState({token:returnObject.token,admin:returnObject.admin,userObject:returnObject.userObject});console.log(returnObject.admin);}});}else{console.log(\"Invalid credentials\");}});}//If the child wants to register a user\nelse if(dataFromChild.register){fetch(\"/api/users/\",{method:\"POST\",headers:{\"accepts\":\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({\"username\":dataFromChild.username,\"email\":dataFromChild.email,\"password\":dataFromChild.password,\"confirmPassword\":dataFromChild.confirmPassword})}).then(function(res){return res.json();}).then(function(json){if(json.token){_this.setState({leftPanelComponent:\"LoginComponent\"});}else{console.log(\"Invalid credentials\");}});}};_this.handleInputChange=function(event){_this.setState({packFilter:event.target.value});};_this.state={time:Date.now(),packs:[],token:\"\",admin:false,userObject:{},leftPanelComponent:\"PlayerStatsComponent\",rightPanelComponent:\"PackListComponent\",packFilter:\"\"};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//Quick check to see if the user has an existing token\ncheckForLocalToken.checkForLocalToken().then(function(returnObject){if(returnObject!=null){_this2.setState({token:returnObject.token,admin:returnObject.admin,userObject:returnObject.userObject});}});//Fetch all the packs that exist in the database to be displayed\nfetch(\"/api/packs\",{method:\"GET\",headers:{\"accepts\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){for(var i=0;i<json.packs.length;i++){var packArray=_this2.state.packs;packArray.push(json.packs[i]);_this2.setState({packs:packArray});}});}//Function that is used to change what renders on the left panel\n},{key:\"leftPanelComponentToRender\",value:function leftPanelComponentToRender(){switch(this.state.leftPanelComponent){case\"LoginComponent\":if(this.state.token){this.setState({leftPanelComponent:\"PlayerStatsComponent\"});}else{return React.createElement(LoginComponent,{callbackToParent:this.leftPanelComponentChildCallback});}case\"RegisterComponent\":return React.createElement(RegisterComponent,{callbackToParent:this.leftPanelComponentChildCallback});case\"PlayerStatsComponent\":if(this.state.token){return React.createElement(PlayerStatsComponent,{token:this.state.token,callbackToParent:this.leftPanelComponentChildCallback});}else{this.setState({leftPanelComponent:\"LoginComponent\"});// return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n}case\"ShopComponent\":if(this.state.token){return React.createElement(ShopComponent,{token:this.state.token,callbackToParent:this.leftPanelComponentChildCallback});}else{this.setState({leftPanelComponent:\"LoginComponent\"});// return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n}}}},{key:\"rightPanelComponentToRender\",value:function rightPanelComponentToRender(){switch(this.state.rightPanelComponent){case\"PackListComponent\":return this.renderPacks(this.state.packs);case\"InventoryListComponent\":if(this.state.token){return this.renderUserPacks(this.state.packs);}else{this.setState({rightPanelComponent:\"PackListComponent\"});}case\"AddPackComponent\":return React.createElement(AddPackComponent,null);case\"AdminComponent\":return React.createElement(AdminComponent,null);}}},{key:\"renderPacks\",//Renders all the packs to the main screen\nvalue:function renderPacks(packs){var _this3=this;return packs.map(function(pack){return React.createElement(PackListComponent,{key:pack.code,code:pack.code,name:pack.name,cards:pack.cards,cost:pack.cost,level:pack.level,filter:_this3.state.packFilter});});}//Renders all the packs to the main screen\n},{key:\"renderUserPacks\",value:function renderUserPacks(packs){var _this4=this;return packs.map(function(pack){return React.createElement(InventoryListComponent,{key:pack.code,code:pack.code,name:pack.name,cards:pack.cards,filter:_this4.state.packFilter});});}},{key:\"renderFilterBar\",value:function renderFilterBar(){if(this.state.rightPanelComponent==\"InventoryListComponent\"||this.state.rightPanelComponent==\"PackListComponent\"){return React.createElement(Form,null,React.createElement(Form.Group,{controlId:\"cardFilter\"},React.createElement(Form.Label,{style:{color:\"white\"}},\"Filter By Card Name\"),React.createElement(Form.Control,{type:\"string\",placeholder:\"\",onChange:this.handleInputChange})));}}},{key:\"render\",value:function render(){var packs=this.state.packs;return React.createElement(\"div\",{className:\"App\",style:{backgroundColor:\"#121212\"}},React.createElement(Styles,null,React.createElement(NavbarRightPanelComponent,{rightPanelComponent:this.state.rightPanelComponent,callbackToParent:this.NavbarRightPanelComponentChildCallback}),React.createElement(Row,{style:{margin:\"0 auto\"}},React.createElement(Col,{sm:4},React.createElement(NavbarLeftPanelComponent,{leftPanelComponent:this.state.leftPanelComponent,callbackToParent:this.NavbarLeftPanelComponentChildCallback}),this.leftPanelComponentToRender()),React.createElement(Col,{style:{marginTop:\"0.5rem\"},sm:8},React.createElement(Accordion,null,this.renderFilterBar(),this.rightPanelComponentToRender())))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["D:/Users/swizzle1999/Documents/Programming/MERN/cm4025/client/src/App.js"],"names":["React","BrowserRouter","Router","Route","render","ReactCSSTransitionGroup","Container","Col","Row","Accordion","Form","Card","AccordionToggle","Button","styled","getFromStorage","setInStorage","NavbarRightPanelComponent","NavbarLeftPanelComponent","PlayerStatsComponent","LoginComponent","RegisterComponent","PackListComponent","InventoryListComponent","AddPackComponent","AdminComponent","ShopComponent","checkForLocalToken","require","fetch","Styles","div","App","props","NavbarRightPanelComponentChildCallback","dataFromChild","openPacks","setState","rightPanelComponent","inventory","addPack","admin","NavbarLeftPanelComponentChildCallback","logOut","token","userObject","playerStats","leftPanelComponent","shop","leftPanelComponentChildCallback","componentToLoad","login","method","headers","body","JSON","stringify","email","password","then","res","json","returnObject","console","log","register","username","confirmPassword","handleInputChange","event","packFilter","target","value","state","time","Date","now","packs","i","length","packArray","push","renderPacks","renderUserPacks","map","pack","code","name","cards","cost","level","color","backgroundColor","margin","leftPanelComponentToRender","marginTop","renderFilterBar","rightPanelComponentToRender","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\nimport './App.css';\nimport { render } from '@testing-library/react';\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\nimport Container from \"react-bootstrap/Container\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Form from 'react-bootstrap/Form';\nimport Card from \"react-bootstrap/Card\";\nimport AccordionToggle from 'react-bootstrap/AccordionToggle';\nimport Button from 'react-bootstrap/Button';\nimport styled from \"styled-components\";\n\nimport {\n  getFromStorage,\n  setInStorage\n} from \"./utils/storage\";\n\n//Component Imports\nimport NavbarRightPanelComponent from './components/NavbarRightPanelComponent';\nimport NavbarLeftPanelComponent from './components/NavbarLeftPanelComponent';\nimport PlayerStatsComponent from './components/PlayerStatsComponent';\nimport LoginComponent from './components/LoginComponent';\nimport RegisterComponent from './components/RegisterComponent';\nimport PackListComponent from \"./components/PackListComponent\";\nimport InventoryListComponent from \"./components/InventoryListComponent\";\nimport AddPackComponent from \"./components/AddPackComponent\";\nimport AdminComponent from \"./components/AdminComponent\";\nimport ShopComponent from \"./components/ShopComponent\";\n\nconst checkForLocalToken = require(\"./utils/checkForLocalToken\");\n\nconst fetch = require(\"node-fetch\");\n\nconst Styles = styled.div`\n.col-sm-4 {\n    padding-left: 0 !important;\n}\n`\n\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      time: Date.now(),\n      packs: [],\n      token: \"\",\n      admin: false,\n      userObject: {},\n      leftPanelComponent: \"PlayerStatsComponent\",\n      rightPanelComponent: \"PackListComponent\",\n      packFilter: \"\",\n    }\n  }\n\n  componentDidMount(){\n    //Quick check to see if the user has an existing token\n    checkForLocalToken.checkForLocalToken()\n    .then(returnObject => {\n      if (returnObject != null){\n        this.setState({\n          token: returnObject.token,\n          admin: returnObject.admin,\n          userObject: returnObject.userObject,\n      })\n      }\n    })\n\n    //Fetch all the packs that exist in the database to be displayed\n    fetch(\"/api/packs\", {method: \"GET\", headers:{\"accepts\": \"application/json\"}})\n      .then(res => res.json())\n      .then(json => {\n        for (let i = 0; i < json.packs.length; i++){\n          let packArray = this.state.packs\n          packArray.push(json.packs[i]);\n          this.setState({packs: packArray});\n        }\n      })\n\n  }\n\n  //Function that is used to change what renders on the left panel\n  leftPanelComponentToRender(){\n    switch(this.state.leftPanelComponent){\n      case \"LoginComponent\":\n        if(this.state.token){\n          this.setState({\n            leftPanelComponent: \"PlayerStatsComponent\",\n          })\n        } else {\n          return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n      case \"RegisterComponent\":\n        return <RegisterComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n      case \"PlayerStatsComponent\":\n        if(this.state.token){\n          return <PlayerStatsComponent token={this.state.token} callbackToParent={this.leftPanelComponentChildCallback}/>  \n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\",\n          })\n          // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n      case \"ShopComponent\":\n        if(this.state.token){\n          return <ShopComponent token={this.state.token} callbackToParent={this.leftPanelComponentChildCallback}/>  \n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\",\n          })\n          // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n    }\n  }\n\n  rightPanelComponentToRender(){\n    switch(this.state.rightPanelComponent){\n      case \"PackListComponent\":\n        return this.renderPacks(this.state.packs)\n      case \"InventoryListComponent\":\n        if (this.state.token){\n          return this.renderUserPacks(this.state.packs);\n        } else {\n          this.setState({\n            rightPanelComponent: \"PackListComponent\",\n          })\n        }\n      case \"AddPackComponent\":\n        return <AddPackComponent />\n      case \"AdminComponent\":\n        return <AdminComponent />\n\n    }\n  }\n\n  NavbarRightPanelComponentChildCallback = dataFromChild => {\n    if (dataFromChild.openPacks){\n      this.setState({\n        rightPanelComponent: \"PackListComponent\",\n      })\n    }else if (dataFromChild.inventory){\n      this.setState({\n        rightPanelComponent: \"InventoryListComponent\",\n      })\n    }else if (dataFromChild.addPack){\n      this.setState({\n        rightPanelComponent: \"AddPackComponent\",\n      })\n    }else if (dataFromChild.admin){\n      this.setState({\n        rightPanelComponent: \"AdminComponent\",\n      })\n    }\n  }\n\n  NavbarLeftPanelComponentChildCallback = dataFromChild => {\n    if (dataFromChild.logOut){\n      setInStorage(\"PokePacksOnline\", \"\");\n      this.setState({\n        token: \"\",\n        userObject: {},\n      })\n    } \n    else if (dataFromChild.playerStats){\n      this.setState({\n        leftPanelComponent: \"PlayerStatsComponent\",\n      })\n    }\n    else if (dataFromChild.shop){\n      this.setState({\n        leftPanelComponent: \"ShopComponent\",\n      })\n    }\n  }\n\n  //The callback all components that use the left panel use to communicate with the parent (this)\n  leftPanelComponentChildCallback = dataFromChild => {\n    //if the child is telling the parent to load a new component\n    if (dataFromChild.componentToLoad){\n      this.setState({\n        leftPanelComponent: dataFromChild.componentToLoad,\n      })\n    } \n    //If the child wants to log a user in\n    else if(dataFromChild.login) {\n      fetch(\"/api/auth/\", {method: \"POST\", headers:{\"accepts\": \"application/json\", \"Content-Type\": \"application/json\"}, body: JSON.stringify({\"email\": dataFromChild.email, \"password\": dataFromChild.password})})\n      .then(res => res.json())\n      .then(json => {\n        if (json.token){\n           setInStorage(\"PokePacksOnline\", json.token);\n           this.setState({\n            leftPanelComponent: \"PlayerStatsComponent\",\n            })\n          //Get token from local storage and then fetch the users details from the database which is then set in state\n          checkForLocalToken.checkForLocalToken()\n          .then(returnObject => {\n            if (returnObject != null){\n              this.setState({\n                token: returnObject.token,\n                admin: returnObject.admin,\n                userObject: returnObject.userObject,\n            })\n            console.log(returnObject.admin);\n            }\n          })\n        } else {\n          console.log(\"Invalid credentials\");\n        }\n      })\n    } \n    //If the child wants to register a user\n    else if (dataFromChild.register){\n      fetch(\"/api/users/\", {method: \"POST\", headers:{\"accepts\": \"application/json\", \"Content-Type\": \"application/json\"}, body: JSON.stringify({\"username\": dataFromChild.username, \"email\": dataFromChild.email, \"password\": dataFromChild.password, \"confirmPassword\": dataFromChild.confirmPassword})})\n      .then(res => res.json())\n      .then(json => {\n        if (json.token){\n           this.setState({\n             leftPanelComponent: \"LoginComponent\",\n           })\n        } else {\n          console.log(\"Invalid credentials\");\n        }\n      })\n    }\n  }\n\n  //Renders all the packs to the main screen\n  renderPacks(packs) {\n    return packs.map(pack => <PackListComponent key={pack.code} code={pack.code} name={pack.name} cards={pack.cards} cost={pack.cost} level={pack.level} filter={this.state.packFilter}/>)\n  }\n\n  //Renders all the packs to the main screen\n  renderUserPacks(packs) {\n    return packs.map(pack => <InventoryListComponent key={pack.code} code={pack.code} name={pack.name} cards={pack.cards} filter={this.state.packFilter}/>)\n  }\n\n  handleInputChange = event => {\n    this.setState({packFilter: event.target.value})\n  }\n\n  renderFilterBar(){\n    if (this.state.rightPanelComponent == \"InventoryListComponent\" || this.state.rightPanelComponent == \"PackListComponent\"){\n      return (\n        <Form>\n          <Form.Group controlId=\"cardFilter\">\n            <Form.Label style={{color: \"white\"}}>Filter By Card Name</Form.Label>\n            <Form.Control type=\"string\" placeholder=\"\" onChange={this.handleInputChange}/>\n          </Form.Group>\n        </Form>\n      );\n    }\n  }\n\n  render() {\n\n    const {packs} = this.state;\n    return (\n      <div className=\"App\" style={{backgroundColor: \"#121212\"}}>\n        <Styles>\n          <NavbarRightPanelComponent rightPanelComponent={this.state.rightPanelComponent} callbackToParent={this.NavbarRightPanelComponentChildCallback}/>\n          <Row style={{margin: \"0 auto\"}}>\n            <Col sm={4}>\n              <NavbarLeftPanelComponent leftPanelComponent={this.state.leftPanelComponent} callbackToParent={this.NavbarLeftPanelComponentChildCallback}/>\n              {this.leftPanelComponentToRender()}\n            </Col>\n            <Col style={{marginTop: \"0.5rem\"}} sm={8}>\n              <Accordion>\n                {this.renderFilterBar()}\n                {this.rightPanelComponentToRender()}\n                {/* {this.renderPacks(this.state.packs)} */}\n              </Accordion>\n            </Col>\n          </Row>\n        </Styles>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}