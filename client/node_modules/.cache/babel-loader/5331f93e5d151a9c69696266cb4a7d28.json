{"ast":null,"code":"import _classCallCheck from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _taggedTemplateLiteral from\"D:\\\\Users\\\\swizzle1999\\\\Documents\\\\Programming\\\\MERN\\\\cm4025\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n.col-sm-4 {\\n    padding-left: 0 !important;\\n}\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from'react';import Accordion from\"react-bootstrap/Accordion\";import Col from\"react-bootstrap/Col\";import Form from'react-bootstrap/Form';import Row from\"react-bootstrap/Row\";import styled from\"styled-components\";import'./App.css';import AddPackComponent from\"./components/AddPackComponent\";import AdminComponent from\"./components/AdminComponent\";import InventoryListComponent from\"./components/InventoryListComponent\";import LoginComponent from'./components/LoginComponent';import NavbarLeftPanelComponent from'./components/NavbarLeftPanelComponent';import NavbarRightPanelComponent from'./components/NavbarRightPanelComponent';import PackListComponent from\"./components/PackListComponent\";import PlayerStatsComponent from'./components/PlayerStatsComponent';import RegisterComponent from'./components/RegisterComponent';import ShopComponent from\"./components/ShopComponent\";import{setInStorage}from\"./utils/storage\";var checkForLocalToken=require(\"./utils/checkForLocalToken\");var sortPacksByLevel=require(\"./utils/sortPacksByLevel\");var fetch=require(\"node-fetch\");var Styles=styled.div(_templateObject());var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.NavbarRightPanelComponentChildCallback=function(dataFromChild){if(dataFromChild.openPacks){_this.setState({rightPanelComponent:\"PackListComponent\"});}else if(dataFromChild.inventory){_this.setState({rightPanelComponent:\"InventoryListComponent\"});}else if(dataFromChild.addPack){_this.setState({rightPanelComponent:\"AddPackComponent\"});}else if(dataFromChild.admin){//Yes a client could modify this and get access to the admin panel\n//But all the API calls from the admin panel are protected serverside with tokens so it dosent actually matter if they can acess it. They get no important information nor can they actually send any requests from it\n//This is here just because it makes sense for a user not to be able to instantly click into an admin panel\nif(_this.state.admin==true){_this.setState({rightPanelComponent:\"AdminComponent\"});}}};_this.NavbarLeftPanelComponentChildCallback=function(dataFromChild){if(dataFromChild.logOut){setInStorage(\"PokePacksOnline\",\"\");_this.setState({token:\"\",userObject:{}});}else if(dataFromChild.playerStats){_this.setState({leftPanelComponent:\"PlayerStatsComponent\"});}else if(dataFromChild.shop){_this.setState({leftPanelComponent:\"ShopComponent\"});}};_this.leftPanelComponentChildCallback=function(dataFromChild){//if the child is telling the parent to load a new component\nif(dataFromChild.componentToLoad){_this.setState({leftPanelComponent:dataFromChild.componentToLoad});}//If the child wants to log a user in\nelse if(dataFromChild.login){fetch(\"/api/auth/\",{method:\"POST\",headers:{\"accepts\":\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({\"email\":dataFromChild.email,\"password\":dataFromChild.password})}).then(function(res){return res.json();}).then(function(json){if(json.token){setInStorage(\"PokePacksOnline\",json.token);_this.setState({leftPanelComponent:\"PlayerStatsComponent\"});//Get token from local storage and then fetch the users details from the database which is then set in state\ncheckForLocalToken.checkForLocalToken().then(function(returnObject){if(returnObject!=null){_this.setState({token:returnObject.token,admin:returnObject.admin,userObject:returnObject.userObject});console.log(returnObject.admin);}});}else{console.log(\"Invalid credentials\");}});}//If the child wants to register a user\nelse if(dataFromChild.register){fetch(\"/api/users/\",{method:\"POST\",headers:{\"accepts\":\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({\"username\":dataFromChild.username,\"email\":dataFromChild.email,\"password\":dataFromChild.password,\"confirmPassword\":dataFromChild.confirmPassword})}).then(function(res){return res.json();}).then(function(json){if(json.token){_this.setState({leftPanelComponent:\"LoginComponent\"});}else{console.log(\"Invalid credentials\");}});}};_this.handleInputChange=function(event){_this.setState({packFilter:event.target.value});};_this.state={time:Date.now(),packs:[],token:\"\",admin:false,userObject:{},leftPanelComponent:\"PlayerStatsComponent\",rightPanelComponent:\"PackListComponent\",packFilter:\"\"};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//Quick check to see if the user has an existing token\ncheckForLocalToken.checkForLocalToken().then(function(returnObject){if(returnObject!=null){_this2.setState({token:returnObject.token,admin:returnObject.userObject.admin,userObject:returnObject.userObject});}});//Fetch all the packs that exist in the database to be displayed\nfetch(\"/api/packs\",{method:\"GET\",headers:{\"accepts\":\"application/json\"}}).then(function(res){return res.json();}).then(function(json){var packArray=_this2.state.packs;for(var i=0;i<json.packs.length;i++){packArray.push(json.packs[i]);}packArray.sort(sortPacksByLevel.compare);_this2.setState({packs:packArray});});}//Function that is used to change what renders on the left panel\n},{key:\"leftPanelComponentToRender\",value:function leftPanelComponentToRender(){switch(this.state.leftPanelComponent){case\"LoginComponent\":if(this.state.token){this.setState({leftPanelComponent:\"PlayerStatsComponent\"});}else{return React.createElement(LoginComponent,{callbackToParent:this.leftPanelComponentChildCallback});}case\"RegisterComponent\":return React.createElement(RegisterComponent,{callbackToParent:this.leftPanelComponentChildCallback});case\"PlayerStatsComponent\":if(this.state.token){return React.createElement(PlayerStatsComponent,{token:this.state.token,callbackToParent:this.leftPanelComponentChildCallback});}else{this.setState({leftPanelComponent:\"LoginComponent\"});// return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n}case\"ShopComponent\":if(this.state.token){return React.createElement(ShopComponent,{token:this.state.token,callbackToParent:this.leftPanelComponentChildCallback});}else{this.setState({leftPanelComponent:\"LoginComponent\"});// return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n}}}},{key:\"rightPanelComponentToRender\",value:function rightPanelComponentToRender(){switch(this.state.rightPanelComponent){case\"PackListComponent\":return this.renderPacks(this.state.packs);case\"InventoryListComponent\":if(this.state.token){return this.renderUserPacks(this.state.packs);}else{this.setState({rightPanelComponent:\"PackListComponent\"});}case\"AddPackComponent\":return React.createElement(AddPackComponent,null);case\"AdminComponent\":return React.createElement(AdminComponent,null);}}},{key:\"renderPacks\",//Renders all the packs to the main screen\nvalue:function renderPacks(packs){var _this3=this;return packs.map(function(pack){return React.createElement(PackListComponent,{key:pack.code,code:pack.code,name:pack.name,cards:pack.cards,cost:pack.cost,level:pack.level,filter:_this3.state.packFilter});});}//Renders all the packs to the main screen\n},{key:\"renderUserPacks\",value:function renderUserPacks(packs){var _this4=this;return packs.map(function(pack){return React.createElement(InventoryListComponent,{key:pack.code,code:pack.code,name:pack.name,cards:pack.cards,filter:_this4.state.packFilter});});}},{key:\"renderFilterBar\",value:function renderFilterBar(){if(this.state.rightPanelComponent==\"InventoryListComponent\"||this.state.rightPanelComponent==\"PackListComponent\"){return React.createElement(Form,null,React.createElement(Form.Group,{controlId:\"cardFilter\"},React.createElement(Form.Label,{style:{color:\"white\"}},\"Filter By Card Name\"),React.createElement(Form.Control,{type:\"string\",placeholder:\"\",onChange:this.handleInputChange})));}}},{key:\"render\",value:function render(){var packs=this.state.packs;return React.createElement(\"div\",{className:\"App\",style:{backgroundColor:\"#121212\"}},React.createElement(Styles,null,React.createElement(NavbarRightPanelComponent,{rightPanelComponent:this.state.rightPanelComponent,callbackToParent:this.NavbarRightPanelComponentChildCallback}),React.createElement(Row,{style:{margin:\"0 auto\"}},React.createElement(Col,{sm:4},React.createElement(NavbarLeftPanelComponent,{leftPanelComponent:this.state.leftPanelComponent,callbackToParent:this.NavbarLeftPanelComponentChildCallback}),this.leftPanelComponentToRender()),React.createElement(Col,{style:{marginTop:\"0.5rem\"},sm:8},React.createElement(Accordion,null,this.renderFilterBar(),this.rightPanelComponentToRender())))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["D:/Users/swizzle1999/Documents/Programming/MERN/cm4025/client/src/App.js"],"names":["React","Accordion","Col","Form","Row","styled","AddPackComponent","AdminComponent","InventoryListComponent","LoginComponent","NavbarLeftPanelComponent","NavbarRightPanelComponent","PackListComponent","PlayerStatsComponent","RegisterComponent","ShopComponent","setInStorage","checkForLocalToken","require","sortPacksByLevel","fetch","Styles","div","App","props","NavbarRightPanelComponentChildCallback","dataFromChild","openPacks","setState","rightPanelComponent","inventory","addPack","admin","state","NavbarLeftPanelComponentChildCallback","logOut","token","userObject","playerStats","leftPanelComponent","shop","leftPanelComponentChildCallback","componentToLoad","login","method","headers","body","JSON","stringify","email","password","then","res","json","returnObject","console","log","register","username","confirmPassword","handleInputChange","event","packFilter","target","value","time","Date","now","packs","packArray","i","length","push","sort","compare","renderPacks","renderUserPacks","map","pack","code","name","cards","cost","level","color","backgroundColor","margin","leftPanelComponentToRender","marginTop","renderFilterBar","rightPanelComponentToRender","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Col from \"react-bootstrap/Col\";\nimport Form from 'react-bootstrap/Form';\nimport Row from \"react-bootstrap/Row\";\nimport styled from \"styled-components\";\nimport './App.css';\nimport AddPackComponent from \"./components/AddPackComponent\";\nimport AdminComponent from \"./components/AdminComponent\";\nimport InventoryListComponent from \"./components/InventoryListComponent\";\nimport LoginComponent from './components/LoginComponent';\nimport NavbarLeftPanelComponent from './components/NavbarLeftPanelComponent';\nimport NavbarRightPanelComponent from './components/NavbarRightPanelComponent';\nimport PackListComponent from \"./components/PackListComponent\";\nimport PlayerStatsComponent from './components/PlayerStatsComponent';\nimport RegisterComponent from './components/RegisterComponent';\nimport ShopComponent from \"./components/ShopComponent\";\nimport { setInStorage } from \"./utils/storage\";\n\n\n\nconst checkForLocalToken = require(\"./utils/checkForLocalToken\");\nconst sortPacksByLevel = require(\"./utils/sortPacksByLevel\");\n\nconst fetch = require(\"node-fetch\");\n\nconst Styles = styled.div`\n.col-sm-4 {\n    padding-left: 0 !important;\n}\n`\n\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      time: Date.now(),\n      packs: [],\n      token: \"\",\n      admin: false,\n      userObject: {},\n      leftPanelComponent: \"PlayerStatsComponent\",\n      rightPanelComponent: \"PackListComponent\",\n      packFilter: \"\",\n    }\n  }\n\n\n  componentDidMount(){\n    //Quick check to see if the user has an existing token\n    checkForLocalToken.checkForLocalToken()\n    .then(returnObject => {\n      if (returnObject != null){\n        this.setState({\n          token: returnObject.token,\n          admin: returnObject.userObject.admin,\n          userObject: returnObject.userObject,\n      })\n      }\n    })\n\n    //Fetch all the packs that exist in the database to be displayed\n    fetch(\"/api/packs\", {method: \"GET\", headers:{\"accepts\": \"application/json\"}})\n      .then(res => res.json())\n      .then(json => {\n        let packArray = this.state.packs\n        for (let i = 0; i < json.packs.length; i++){\n          packArray.push(json.packs[i]);\n        }\n        packArray.sort(sortPacksByLevel.compare)\n        this.setState({packs: packArray});\n      })\n\n  }\n\n  //Function that is used to change what renders on the left panel\n  leftPanelComponentToRender(){\n    switch(this.state.leftPanelComponent){\n      case \"LoginComponent\":\n        if(this.state.token){\n          this.setState({\n            leftPanelComponent: \"PlayerStatsComponent\",\n          })\n        } else {\n          return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n      case \"RegisterComponent\":\n        return <RegisterComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n      case \"PlayerStatsComponent\":\n        if(this.state.token){\n          return <PlayerStatsComponent token={this.state.token} callbackToParent={this.leftPanelComponentChildCallback}/>  \n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\",\n          })\n          // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n      case \"ShopComponent\":\n        if(this.state.token){\n          return <ShopComponent token={this.state.token} callbackToParent={this.leftPanelComponentChildCallback}/>  \n        } else {\n          this.setState({\n            leftPanelComponent: \"LoginComponent\",\n          })\n          // return <LoginComponent callbackToParent={this.leftPanelComponentChildCallback}/>\n        }\n    }\n  }\n\n  rightPanelComponentToRender(){\n    switch(this.state.rightPanelComponent){\n      case \"PackListComponent\":\n        return this.renderPacks(this.state.packs)\n      case \"InventoryListComponent\":\n        if (this.state.token){\n          return this.renderUserPacks(this.state.packs);\n        } else {\n          this.setState({\n            rightPanelComponent: \"PackListComponent\",\n          })\n        }\n      case \"AddPackComponent\":\n        return <AddPackComponent />\n      case \"AdminComponent\":\n        return <AdminComponent />\n\n    }\n  }\n\n  NavbarRightPanelComponentChildCallback = dataFromChild => {\n    if (dataFromChild.openPacks){\n      this.setState({\n        rightPanelComponent: \"PackListComponent\",\n      })\n    }else if (dataFromChild.inventory){\n      this.setState({\n        rightPanelComponent: \"InventoryListComponent\",\n      })\n    }else if (dataFromChild.addPack){\n      this.setState({\n        rightPanelComponent: \"AddPackComponent\",\n      })\n    }else if (dataFromChild.admin){\n      //Yes a client could modify this and get access to the admin panel\n      //But all the API calls from the admin panel are protected serverside with tokens so it dosent actually matter if they can acess it. They get no important information nor can they actually send any requests from it\n      //This is here just because it makes sense for a user not to be able to instantly click into an admin panel\n      if (this.state.admin == true) {\n        this.setState({\n          rightPanelComponent: \"AdminComponent\",\n        })\n      }\n    }\n  }\n\n  NavbarLeftPanelComponentChildCallback = dataFromChild => {\n    if (dataFromChild.logOut){\n      setInStorage(\"PokePacksOnline\", \"\");\n      this.setState({\n        token: \"\",\n        userObject: {},\n      })\n    } \n    else if (dataFromChild.playerStats){\n      this.setState({\n        leftPanelComponent: \"PlayerStatsComponent\",\n      })\n    }\n    else if (dataFromChild.shop){\n      this.setState({\n        leftPanelComponent: \"ShopComponent\",\n      })\n    }\n  }\n\n  //The callback all components that use the left panel use to communicate with the parent (this)\n  leftPanelComponentChildCallback = dataFromChild => {\n    //if the child is telling the parent to load a new component\n    if (dataFromChild.componentToLoad){\n      this.setState({\n        leftPanelComponent: dataFromChild.componentToLoad,\n      })\n    } \n    //If the child wants to log a user in\n    else if(dataFromChild.login) {\n      fetch(\"/api/auth/\", {method: \"POST\", headers:{\"accepts\": \"application/json\", \"Content-Type\": \"application/json\"}, body: JSON.stringify({\"email\": dataFromChild.email, \"password\": dataFromChild.password})})\n      .then(res => res.json())\n      .then(json => {\n        if (json.token){\n           setInStorage(\"PokePacksOnline\", json.token);\n           this.setState({\n            leftPanelComponent: \"PlayerStatsComponent\",\n            })\n          //Get token from local storage and then fetch the users details from the database which is then set in state\n          checkForLocalToken.checkForLocalToken()\n          .then(returnObject => {\n            if (returnObject != null){\n              this.setState({\n                token: returnObject.token,\n                admin: returnObject.admin,\n                userObject: returnObject.userObject,\n            })\n            console.log(returnObject.admin);\n            }\n          })\n        } else {\n          console.log(\"Invalid credentials\");\n        }\n      })\n    } \n    //If the child wants to register a user\n    else if (dataFromChild.register){\n      fetch(\"/api/users/\", {method: \"POST\", headers:{\"accepts\": \"application/json\", \"Content-Type\": \"application/json\"}, body: JSON.stringify({\"username\": dataFromChild.username, \"email\": dataFromChild.email, \"password\": dataFromChild.password, \"confirmPassword\": dataFromChild.confirmPassword})})\n      .then(res => res.json())\n      .then(json => {\n        if (json.token){\n           this.setState({\n             leftPanelComponent: \"LoginComponent\",\n           })\n        } else {\n          console.log(\"Invalid credentials\");\n        }\n      })\n    }\n  }\n\n  //Renders all the packs to the main screen\n  renderPacks(packs) {\n    return packs.map(pack => <PackListComponent key={pack.code} code={pack.code} name={pack.name} cards={pack.cards} cost={pack.cost} level={pack.level} filter={this.state.packFilter}/>)\n  }\n\n  //Renders all the packs to the main screen\n  renderUserPacks(packs) {\n    return packs.map(pack => <InventoryListComponent key={pack.code} code={pack.code} name={pack.name} cards={pack.cards} filter={this.state.packFilter}/>)\n  }\n\n  handleInputChange = event => {\n    this.setState({packFilter: event.target.value})\n  }\n\n  renderFilterBar(){\n    if (this.state.rightPanelComponent == \"InventoryListComponent\" || this.state.rightPanelComponent == \"PackListComponent\"){\n      return (\n        <Form>\n          <Form.Group controlId=\"cardFilter\">\n            <Form.Label style={{color: \"white\"}}>Filter By Card Name</Form.Label>\n            <Form.Control type=\"string\" placeholder=\"\" onChange={this.handleInputChange}/>\n          </Form.Group>\n        </Form>\n      );\n    }\n  }\n\n  render() {\n\n    const {packs} = this.state;\n    return (\n      <div className=\"App\" style={{backgroundColor: \"#121212\"}}>\n        <Styles>\n          <NavbarRightPanelComponent rightPanelComponent={this.state.rightPanelComponent} callbackToParent={this.NavbarRightPanelComponentChildCallback}/>\n          <Row style={{margin: \"0 auto\"}}>\n            <Col sm={4}>\n              <NavbarLeftPanelComponent leftPanelComponent={this.state.leftPanelComponent} callbackToParent={this.NavbarLeftPanelComponentChildCallback}/>\n              {this.leftPanelComponentToRender()}\n            </Col>\n            <Col style={{marginTop: \"0.5rem\"}} sm={8}>\n              <Accordion>\n                {this.renderFilterBar()}\n                {this.rightPanelComponentToRender()}\n                {/* {this.renderPacks(this.state.packs)} */}\n              </Accordion>\n            </Col>\n          </Row>\n        </Styles>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}